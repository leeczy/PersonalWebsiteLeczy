(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+/OB":function(t,e,i){i("ax0f")({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},"+nzf":function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);t.exports=function(){return i(n),n}}else{var a=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}},"+oxZ":function(t,e,i){var n=i("9JhN"),a=i("Ew2P"),s=i("6OVi"),r=i("WxKw");for(var o in a){var c=n[o],u=c&&c.prototype;if(u&&u.forEach!==s)try{r(u,"forEach",s)}catch(t){u.forEach=s}}},"1t7P":function(t,e,i){"use strict";var n=i("ax0f"),a=i("9JhN"),s=i("VCi3"),r=i("DpO5"),o=i("1Mu/"),c=i("56Cj"),u=i("TbR9"),l=i("ct80"),d=i("8aeu"),h=i("xt6W"),p=i("dSaG"),f=i("FXyv"),v=i("N9G2"),y=i("N4z3"),m=i("CD8Q"),_=i("lhjL"),g=i("guiJ"),b=i("DEeE"),T=i("ZdBB"),E=i("7lg/"),P=i("JAL5"),M=i("GFpt"),w=i("q9+l"),S=i("4Sk5"),k=i("WxKw"),I=i("uLp7"),A=i("TN3B"),C=i("MyxS"),L=i("1odi"),V=i("HYrn"),N=i("fVMg"),O=i("TkGI"),W=i("aokA"),D=i("+kY7"),F=i("zc29"),x=i("0FSu").forEach,R=C("hidden"),B=N("toPrimitive"),H=F.set,U=F.getterFor("Symbol"),j=Object.prototype,G=a.Symbol,K=s("JSON","stringify"),Y=M.f,z=w.f,q=E.f,J=S.f,Z=A("symbols"),X=A("op-symbols"),Q=A("string-to-symbol-registry"),$=A("symbol-to-string-registry"),tt=A("wks"),et=a.QObject,it=!et||!et.prototype||!et.prototype.findChild,nt=o&&l((function(){return 7!=g(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=Y(j,e);n&&delete j[e],z(t,e,i),n&&t!==j&&z(j,e,n)}:z,at=function(t,e){var i=Z[t]=g(G.prototype);return H(i,{type:"Symbol",tag:t,description:e}),o||(i.description=e),i},st=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},rt=function(t,e,i){t===j&&rt(X,e,i),f(t);var n=m(e,!0);return f(i),d(Z,n)?(i.enumerable?(d(t,R)&&t[R][n]&&(t[R][n]=!1),i=g(i,{enumerable:_(0,!1)})):(d(t,R)||z(t,R,_(1,{})),t[R][n]=!0),nt(t,n,i)):z(t,n,i)},ot=function(t,e){f(t);var i=y(e),n=b(i).concat(dt(i));return x(n,(function(e){o&&!ct.call(i,e)||rt(t,e,i[e])})),t},ct=function(t){var e=m(t,!0),i=J.call(this,e);return!(this===j&&d(Z,e)&&!d(X,e))&&(!(i||!d(this,e)||!d(Z,e)||d(this,R)&&this[R][e])||i)},ut=function(t,e){var i=y(t),n=m(e,!0);if(i!==j||!d(Z,n)||d(X,n)){var a=Y(i,n);return!a||!d(Z,n)||d(i,R)&&i[R][n]||(a.enumerable=!0),a}},lt=function(t){var e=q(y(t)),i=[];return x(e,(function(t){d(Z,t)||d(L,t)||i.push(t)})),i},dt=function(t){var e=t===j,i=q(e?X:y(t)),n=[];return x(i,(function(t){!d(Z,t)||e&&!d(j,t)||n.push(Z[t])})),n};(c||(I((G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=V(t),i=function(t){this===j&&i.call(X,t),d(this,R)&&d(this[R],e)&&(this[R][e]=!1),nt(this,e,_(1,t))};return o&&it&&nt(j,e,{configurable:!0,set:i}),at(e,t)}).prototype,"toString",(function(){return U(this).tag})),I(G,"withoutSetter",(function(t){return at(V(t),t)})),S.f=ct,w.f=rt,M.f=ut,T.f=E.f=lt,P.f=dt,O.f=function(t){return at(N(t),t)},o&&(z(G.prototype,"description",{configurable:!0,get:function(){return U(this).description}}),r||I(j,"propertyIsEnumerable",ct,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:G}),x(b(tt),(function(t){W(t)})),n({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=String(t);if(d(Q,e))return Q[e];var i=G(e);return Q[e]=i,$[i]=e,i},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(d($,t))return $[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!o},{create:function(t,e){return void 0===e?g(t):ot(g(t),e)},defineProperty:rt,defineProperties:ot,getOwnPropertyDescriptor:ut}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:lt,getOwnPropertySymbols:dt}),n({target:"Object",stat:!0,forced:l((function(){P.f(1)}))},{getOwnPropertySymbols:function(t){return P.f(v(t))}}),K)&&n({target:"JSON",stat:!0,forced:!c||l((function(){var t=G();return"[null]"!=K([t])||"{}"!=K({a:t})||"{}"!=K(Object(t))}))},{stringify:function(t,e,i){for(var n,a=[t],s=1;arguments.length>s;)a.push(arguments[s++]);if(n=e,(p(e)||void 0!==t)&&!st(t))return h(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!st(e))return e}),a[1]=e,K.apply(null,a)}});G.prototype[B]||k(G.prototype,B,G.prototype.valueOf),D(G,"Symbol"),L[R]=!0},"42G/":function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,a=i;return[a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]]].join("")}},5878:function(t,e,i){i("ax0f")({target:"Function",proto:!0},{bind:i("zh11")})},"6OVi":function(t,e,i){"use strict";var n=i("0FSu").forEach,a=i("f4p7"),s=i("znGZ"),r=a("forEach"),o=s("forEach");t.exports=r&&o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"7lg/":function(t,e,i){var n=i("N4z3"),a=i("ZdBB").f,s={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return r&&"[object Window]"==s.call(t)?function(t){try{return a(t)}catch(t){return r.slice()}}(t):a(n(t))}},"7x/C":function(t,e,i){var n=i("POz8"),a=i("uLp7"),s=i("UmhL");n||a(Object.prototype,"toString",s,{unsafe:!0})},"HT/6":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));const n=Object.freeze({INITIAL:"initial",AUTO_PAUSED:"autoPaused",USER_PAUSED:"userPaused",AUTO_PLAYING:"autoPlaying",USER_PLAYING:"userPlaying",FINISHED:"finished"})},PRhO:function(t,e,i){var n=i("VjGk"),a=i("qL0z"),s=a;s.v1=n,s.v4=a,t.exports=s},UmhL:function(t,e,i){"use strict";var n=i("POz8"),a=i("2gZs");t.exports=n?{}.toString:function(){return"[object "+a(this)+"]"}},VjGk:function(t,e,i){var n,a,s=i("+nzf"),r=i("42G/"),o=0,c=0;t.exports=function(t,e,i){var u=e&&i||0,l=e||[],d=(t=t||{}).node||n,h=void 0!==t.clockseq?t.clockseq:a;if(null==d||null==h){var p=s();null==d&&(d=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=a=16383&(p[6]<<8|p[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:c+1,y=f-o+(v-c)/1e4;if(y<0&&void 0===t.clockseq&&(h=h+1&16383),(y<0||f>o)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=f,c=v,a=h;var m=(1e4*(268435455&(f+=122192928e5))+v)%4294967296;l[u++]=m>>>24&255,l[u++]=m>>>16&255,l[u++]=m>>>8&255,l[u++]=255&m;var _=f/4294967296*1e4&268435455;l[u++]=_>>>8&255,l[u++]=255&_,l[u++]=_>>>24&15|16,l[u++]=_>>>16&255,l[u++]=h>>>8|128,l[u++]=255&h;for(var g=0;g<6;++g)l[u+g]=d[g];return e||r(l)}},"W/Kd":function(t,e){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}},Xq8B:function(t,e,i){"use strict";i("1t7P"),i("jQ/y"),i("aLgo"),i("hBpG"),i("jwue"),i("hCOa"),i("vrRf"),i("plBw"),i("lTEL"),i("z84I"),i("KOtZ"),i("M+/F"),i("+/OB"),i("cARO"),i("5878"),i("ho0z"),i("6U7i"),i("ssvU"),i("kH1Z"),i("IAdD"),i("+KXO"),i("7x/C"),i("JtPf"),i("KqXw"),i("DZ+c"),i("87if"),i("+oxZ"),i("kYxP"),i("sVFb");var n,a,s,r,o,c=i("1Pcy"),u=i.n(c),l=i("W/Kd"),d=i.n(l),h=i("KEM+"),p=i.n(h),f=i("RhWx"),v=i.n(f),y=i("r2q8"),m=i.n(y),_=i("PRhO"),g=i.n(_);function b(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return T(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var E="AD_SKIP_EVENT",P="CONFIG_LOADED_EVENT",M="CTA_CLICK_EVENT",w="CTA_IMPRESSION_EVENT",S="ERROR_EVENT",k="FULL_SCREEN_EVENT",I="GROUPM_VIEW_EVENT",A="HEARTBEAT_EVENT",C="HEARTBEAT_START_EVENT",L="INITIAL_CTA_IMPRESSION_EVENT",V="INITIAL_INTEND_TO_PLAY_EVENT",N="INTEND_TO_PLAY_EVENT",O="LOOP_EVENT",W="MRC_AUDIBLE_VIEW_EVENT",D="MRC_VIEW_EVENT",F="MUTE_EVENT",x="ONE_SEC_VIEW_EVENT",R="SIX_SEC_VIEW_EVENT",B="SHORT_FORM_COMPLETE_EVENT",H="PAUSE_EVENT",U="PLAY_EVENT",j="PLAY_FROM_TAP_EVENT",G="PLAYBACK_25_EVENT",K="PLAYBACK_50_EVENT",Y="PLAYBACK_75_EVENT",z="PLAYBACK_95_EVENT",q="PLAYBACK_COMPLETE_EVENT",J="PLAYBACK_ERROR_EVENT",Z="PLAYBACK_LAPSE_EVENT",X="PLAYBACK_START_EVENT",Q="REPLAY_EVENT",$="REWIND_EVENT",tt="SHRINK_EVENT",et="STARTUP_ERROR_EVENT",it="TEARDOWN_EVENT",nt="TICK_EVENT",at="TRACK_FINISHED_EVENT",st="UNMUTE_EVENT",rt="VIDEO_SESSION_EVENT",ot="VIDEO_QUALITY_VIEW_EVENT",ct="VIDEO_VIEW_EVENT",ut="VIEW_THRESHOLD_EVENT",lt="ad",dt="content",ht="broadcast",pt="gif",ft="live",vt="media_entity",yt="partner_video",mt="periscope",_t="vine",gt="vmap",bt=Object.assign({},{event:"url",visit:"url",url:"url",image:"url",watch:"url"},{watch_now:"watch",visit_site:"url",shop:"url",see_more:"url",go_to:"url"});function Tt(t){return Pt(t,t.source.trackId)}function Et(t){return Pt(t,t.currentTrackId)}function Pt(t,e){return t.tracks.find((function(t){return e===t.id}))}function Mt(t){return t.tracks.find((function(t){return lt===t.displayType}))}function wt(t){return Boolean(t)&&t.isPlaying&&!t.isScrubbing&&!t.isMuted}var St=((n={})[ct]="creativeView",n[G]="firstQuartile",n[K]="midpoint",n[Y]="thirdQuartile",n[q]="complete",n[U]="resume",n[H]="pause",n[$]="rewind",n[S]="adError",n),kt=function(){function t(t){var e=this;Object.keys(St).forEach((function(i){t.on(i,(function(t){e.fireBeacon(St[i],t)}))})),t.on(X,this.onPlaybackStart.bind(this))}var e=t.prototype;return e.onPlaybackStart=function(t){this.fireBeacon("start",t),this.fireBeacon("adImpression",t)},e.fireBeacon=function(t,e){var i=Et(e);if(void 0!==i&&void 0!==i.beacons&&void 0!==i.beacons[t])for(var n,a=b(i.beacons[t]);!(n=a()).done;){var s=n.value;(new window.Image).src=s}},t}(),It=function(){function t(t){this.analytics=t,this.hasFiredOnTrackMap={},this.analytics.on(w,this.onCtaImpressionEvent.bind(this))}return t.prototype.onCtaImpressionEvent=function(t){var e=t.currentTrackId;this.hasFiredOnTrackMap[e]||(this.hasFiredOnTrackMap[e]=!0,this.analytics.emit(L,t))},t}(),At=function(){function t(t){this.analytics=t,this.hasStarted=!1,this.hasFired=!1,this.analytics.on(X,this.onPlaybackStartEvent.bind(this)),this.analytics.on(N,this.onShowEvent.bind(this)),this.analytics.on(S,this.onErrorEvent.bind(this))}var e=t.prototype;return e.onPlaybackStartEvent=function(){this.hasStarted=!0},e.onShowEvent=function(){this.intentToPlayTime=new Date},e.onErrorEvent=function(t,e){var i=this.constructClientMediaEventError(t,e);if(!this.hasStarted&&!this.hasFired){var n,a=void 0!==this.intentToPlayTime?new Date-this.intentToPlayTime:void 0;i&&(n={latency_millis:a,error:i}),this.analytics.emit(et,t,Object.assign({latency:a},e),n),this.hasFired=!0}this.analytics.emit(J,t,e,i)},e.constructClientMediaEventError=function(t,e){var i=e&&e.media_details&&e.media_details.media_error||{};return{is_fatal:i.is_fatal,category:i.category,message:i.message,retry_count:i.retry_count}},t}(),Ct=function(){function t(t){this.bufferingCount=0,this.bufferingDurationMs=0,this.bufferingBeginTimeMs=void 0,t.on(nt,this.onTickEvent.bind(this)),t.on(C,this.onHeartbeatStart.bind(this)),t.on(A,this.onHeartbeat.bind(this))}var e=t.prototype;return e.onHeartbeat=function(t){this.reset(t)},e.onHeartbeatStart=function(t){this.reset(t)},e.onTickEvent=function(t){var e=Et(t);void 0!==e&&(e.isBuffering&&null==this.bufferingBeginTimeMs?(this.bufferingBeginTimeMs=Date.now(),this.bufferingCount++):e.isBuffering||null==this.bufferingBeginTimeMs||(this.bufferingDurationMs+=Date.now()-this.bufferingBeginTimeMs,this.bufferingBeginTimeMs=void 0))},e.getBufferTime=function(t){var e=Et(t);if(void 0!==e){var i=this.bufferingDurationMs;return e.isBuffering&&null!=this.bufferingBeginTimeMs&&(i+=Date.now()-this.bufferingBeginTimeMs),i}},e.reset=function(t){var e=Et(t);void 0!==e&&(this.bufferingBeginTimeMs=e.isBuffering?Date.now():void 0,this.bufferingCount=e.isBuffering?1:0,this.bufferingDurationMs=0)},t}();function Lt(t){return"number"!=typeof t||Number.isNaN(t)||t===1/0||t===-1/0?"string"==typeof t?t:void 0:t.toString()}var Vt=function(){function t(t){this.analytics=t,this.bufferingDurationListener=new Ct(t),this.lastKnownDataUsageBytes=0,this.audibleDuration=0,this.bitrateHistory=[],this.latencyHistory=[],this.previousTickTimestamp,this.analytics.on(nt,this.onTickEvent.bind(this)),this.analytics.on(U,this.onPlayEvent.bind(this)),this.analytics.on(X,this.onPlaybackStartEvent.bind(this)),this.analytics.on(at,this.onTrackFinishedEvent.bind(this)),this.analytics.on(S,this.onErrorEvent.bind(this)),this.analytics.on(H,this.onPauseEvent.bind(this)),this.analytics.on(it,this.onTeardownEvent.bind(this)),this.analytics.on(O,this.onLoopEvent.bind(this)),this.analytics.on(E,this.onAdSkip.bind(this))}var e=t.prototype;return e.onTickEvent=function(t){var e=Et(t);if(void 0!==e){if(this.updateTimesOnTick(e,t),this.updatePerfMetrics(e),t.isScrubbing?this.stopPolling():t.isPlaying&&this.startPolling(t),void 0!==this.lastKnownPlayerState){var i=this.lastKnownPlayerState.percentVisible,n=t.percentVisible;(i>0&&0===n||0===i&&n>0)&&(this.stopPolling(),this.startPolling(t))}this.lastKnownPlayerState=t,this.previousTickTimestamp=Date.now()}},e.onPlayEvent=function(t){this.hasPlaybackStarted&&this.startPolling(t),this.lastKnownPlayerState=t},e.onPlaybackStartEvent=function(t){this.startPolling(t),this.lastKnownPlayerState=t,this.hasPlaybackStarted=!0},e.onTrackFinishedEvent=function(t){this.hasPlaybackStarted=!1,void 0!==Et(t)&&(this.stopPolling(),this.lastKnownPlayerState=t)},e.onErrorEvent=function(t,e){e&&e.media_details&&e.media_details.media_error&&e.media_details.media_error.is_fatal&&(this.stopPolling(),this.lastKnownPlayerState=t)},e.onPauseEvent=function(t,e){this.stopPolling(),this.lastKnownPlayerState=t},e.onTeardownEvent=function(t,e){this.stopPolling(!0),this.lastKnownPlayerState=t},e.onLoopEvent=function(t){this.startPolling(t)},e.onAdSkip=function(){this.stopPolling()},e.updateTimesOnTick=function(t,e){var i;void 0!==(i=t.contentType===ht||t.contentType===ft||t.contentType===mt?t.absoluteTimeMs:t.currentTimeMs)&&(wt(e)&&void 0!==this.lastTimeMs&&(this.audibleDuration+=i-this.lastTimeMs),this.lastTimeMs=i,void 0===this.startTimeMs&&(this.startTimeMs=i))},e.startPolling=function(t){var e=Tt(t);void 0===this.intervalId&&void 0!==e&&e.contentType!==_t&&(this.analytics.emit(C,t),this.onHeartbeatStart(t))},e.stopPolling=function(t){(this.intervalId||t)&&(this.onHeartbeat(),this.lastTimeMs=void 0,this.startTimeMs=void 0),void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},e.onHeartbeatStart=function(t){this.intervalId=setInterval(this.onHeartbeat.bind(this),t.heartbeatIntervalMs||5e3),this.lastTimeMs=void 0,this.startTimeMs=void 0,this.bitrateHistory=[],this.latencyHistory=[]},e.updatePerfMetrics=function(t){if(this.previousTickTimestamp){var e=Date.now()-this.previousTickTimestamp;t.currentBitrate&&this.bitrateHistory.push({value:t.currentBitrate,weight:e}),t.liveLatencyMs&&this.latencyHistory.push({value:t.liveLatencyMs,weight:e})}},e.onHeartbeat=function(){var t=this.lastKnownPlayerState;if(t){var e=Et(t),i=this.getProgramDateTimeMs();if(void 0!==i&&void 0!==e){var n=e.currentBitrate?{sampled_bitrate:e.currentBitrate}:{},a=0;t.dataUsageBytes&&(a=t.dataUsageBytes-this.lastKnownDataUsageBytes,this.lastKnownDataUsageBytes=t.dataUsageBytes);var s,r,o={data_usage_bytes:a},c=this.bufferingDurationListener.bufferingCount,u=this.bufferingDurationListener.getBufferTime(t),l=Math.floor(100*t.percentVisible),d=Object.assign({buffering_duration_millis:u,video_visibility:l},{start_program_date_time_millis:i.start_program_date_time_millis,end_program_date_time_millis:i.end_program_date_time_millis},n,o),h={buffering_duration_millis:Lt(u),buffering_count:c,percent_in_view:l,sampled_bits_per_second:e.currentBitrate,data_usage_bytes:Lt(o.data_usage_bytes),start_program_date_time_millis:Lt(i.start_program_date_time_millis),end_program_date_time_millis:Lt(i.end_program_date_time_millis),audible_duration_millis:Lt(i.audible_duration_millis),bandwidth_estimate_bps:Lt(t.bandwidthEstimateBps),bitrate_metrics:(s=this.bitrateHistory,r=Ot(s),r&&{min_bps:Math.round(r.min),max_bps:Math.round(r.max),avg_bps:Math.round(r.avg)}),live_or_non_live_heartbeat_metrics:Nt(e.isLive,this.latencyHistory)};this.analytics.emit(A,t,d,h)}}},e.getProgramDateTimeMs=function(){if(void 0!==this.startTimeMs&&void 0!==this.lastTimeMs){var t=this.startTimeMs,e=this.lastTimeMs,i=this.audibleDuration;return this.startTimeMs=this.lastTimeMs,this.audibleDuration=0,{start_program_date_time_millis:Math.round(t),end_program_date_time_millis:Math.round(e),audible_duration_millis:Math.round(i)}}return{}},t}();function Nt(t,e){var i=Ot(e);return t?{live_heartbeat_metrics:{latency_metrics:i&&{min_ms:Math.round(i.min),max_ms:Math.round(i.max),avg_ms:Math.round(i.avg)}}}:{non_live_heartbeat_metrics:{}}}function Ot(t){if(t&&t.length){var e=t.map((function(t){return t.value}));return{min:Math.min.apply(Math,v()(e)),max:Math.max.apply(Math,v()(e)),avg:function(t){var e=t.reduce((function(t,e){return t+e.weight}),0);return t.reduce((function(t,e){return t+e.value*e.weight}),0)/e}(t)}}}var Wt=function(){function t(t){this.analytics=t,this.hasFiredOnTrackMap={},this.analytics.on(N,this.onIntendToPlayEvent.bind(this)),this.analytics.on(Q,this.onIntendToPlayEvent.bind(this)),this.analytics.on(at,this.onTrackFinishedEvent.bind(this))}var e=t.prototype;return e.onIntendToPlayEvent=function(t){this.hasFiredOnTrackMap[t.currentTrackId]||(this.hasFiredOnTrackMap[t.currentTrackId]=!0,this.analytics.emit(V,t))},e.onTrackFinishedEvent=function(t){var e=Et(t);e&&(e.shouldLoop||(this.hasFiredOnTrackMap[t.currentTrackId]=!1))},t}(),Dt=function(){function t(t){this.analytics=t,this.analytics.on(at,this.onTrackFinishedEvent.bind(this))}return t.prototype.onTrackFinishedEvent=function(t){var e=Et(t);void 0!==e&&e.shouldLoop&&this.analytics.emit(O,t)},t}(),Ft={home:"HomeTimeline",list:"Lists",live_broadcast:"BroadcastPage",live_event_timeline:"EventPage",me:"UserTimeline",moments:"Moments",permalink:"TweetCard",profile:"UserTimeline",search:"Search"},xt=function(t){return"/api/v2/"+t},Rt="videoStartWatchingLive",Bt="videoPingLive",Ht="videoStopWatchingLive",Ut=((a={})[Rt]={method:"GET",path:xt("startPublic")},a[Bt]={method:"GET",path:xt("pingPublic")},a[Ht]={method:"GET",path:xt("stopPublic")},a.videoStartWatchingReplay={method:"GET",path:xt("replayViewedPublic")},a.videoPingReplay={method:"GET",path:xt("pingReplayViewedPublic")},a.videoStopWatchingReplay={method:"GET",path:xt("endReplayViewedPublic")},a),jt=function(){function t(t,e){if(this.httpClient=t,this.idempotenceId=Date.now()+"--"+g()(),(null==e?void 0:e.scribeContext)&&(null==e?void 0:e.periscopeComponent)){var i=e.scribeContext,n=e.periscopeComponent;this.pageContext=this.getPageContext(i),this.componentContext=n}}var e=t.prototype;return e.getPageContext=function(t){var e=t.page;return"permalink_overlay"===t.section?"TweetCard":Ft[e]||""},e.call=function(t,e){var i={"X-Idempotence":this.idempotenceId},n=Ut[t],a=n.method,s=n.path;return this.httpClient.dispatch({headers:i,host:"https://proxsee.pscp.tv",method:a,path:s,params:e})},e.videoStartWatching=function(t,e,i){var n=this;return new Promise((function(a,s){("string"!=typeof t||t.length<1)&&s(new Error("Cannot videoStartWatching. lifecycleToken not valid, lifecycleToken="+t));var r=e?"videoStartWatchingReplay":Rt,o={life_cycle_token:t,auto_play:!!i};n.pageContext&&(o.page=n.pageContext),n.componentContext&&(o.component=n.componentContext),n.call(r,o).then((function(t){var e=JSON.parse(t.body).session;e?a(e):s("No valid Session")}),s)}))},e.videoPingWatching=function(t,e){var i=this;return new Promise((function(n,a){("string"!=typeof t||t.length<1)&&a(new Error("Cannot videoPingWatching. session not valid, session="+t));var s=e?"videoPingReplay":Bt;i.call(s,{session:t}).then((function(t){JSON.parse(t.body).success?n():a("Ping request failed")}),a)}))},e.videoStopWatching=function(t,e){var i=this;return new Promise((function(n,a){("string"!=typeof t||t.length<1)&&a(new Error("Cannot videoStopWatching. session not valid, session="+t));var s=e?"videoStopWatchingReplay":Ht;i.call(s,{session:t}).then((function(t){JSON.parse(t.body).success?n():a("StopWatching request failed")}),a)}))},t}();var Gt=function(){function t(t){this.api=t,this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),this.startPingWatching=this.startPingWatching.bind(this),this.isVideoPreview=!1,this.isReplay=!0}var e=t.prototype;return e.updateSession=function(t){this.session=t},e.setStartWatchingTimer=function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,3e3)},e.clearStartWatchingTimer=function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)},e.handleStartWatching=function(){if(!this.isWatching){this.stopPingWatching();var t=this.api.videoStartWatching(this.lifecycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession).then(this.startPingWatching);return this.isWatching=!0,t}},e.startPingWatching=function(){var t=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval((function(){t.isWatching?t.api.videoPingWatching(t.session,t.isReplay):t.stopPingWatching()}),3e4)},e.stopPingWatching=function(){clearInterval(this.pingWatchingTimer)},e.updateLifecycleToken=function(t){void 0!==t&&t!==this.lifecycleToken&&(this.lifecycleToken=t,this.isWatching&&(this.stopWatching(),this.handleStartWatching()))},e.updateIsReplay=function(t){void 0!==t&&t!==this.isReplay&&(this.isReplay=t)},e.startWatching=function(){return this.isVideoPreview=!1,this.handleStartWatching()},e.startWatchingPreview=function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()},e.stopWatching=function(){this.isWatching&&(this.stopPingWatching(),this.session&&this.api.videoStopWatching(this.session,this.isReplay),this.isWatching=!1)},e.destroy=function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifecycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0},t}(),Kt=[P,U,H,at,it],Yt=function(){function t(t,e){var i=this;this.analytics=t,this.lifecycleController=e,Kt.map((function(t){return i.analytics.on(t,i.possiblyHandleEvent.bind(i,t))}))}var e=t.prototype;return e.possiblyHandleEvent=function(t,e){if(this.shouldSendPeriscopeAnalytics(e)){var i=Et(e);switch(t){case P:this.updateLifecycleToken(e),this.updateReplayState(!i.isLive);break;case U:this.handleStartWatching(e);break;case H:this.handleStopWatching(e);break;case at:this.handleStopWatching(e),this.updateReplayState(!0);break;case it:this.teardownPeriscopeLifecycle()}}},e.shouldSendPeriscopeAnalytics=function(t){var e=Et(t);return void 0!==e&&(e.contentType===mt||e.contentType===ht)},e.getLifecycleToken=function(t){return Et(t).lifecycleToken},e.updateLifecycleToken=function(t){var e=this.getLifecycleToken(t);this.lifecycleController.updateLifecycleToken(e)},e.updateReplayState=function(t){this.lifecycleController.updateIsReplay(t)},e.handleStartWatching=function(t){this.getLifecycleToken(t)&&(t.isPreview?this.lifecycleController.startWatchingPreview():this.lifecycleController.startWatching())},e.handleStopWatching=function(t){this.getLifecycleToken(t)&&this.lifecycleController.stopWatching()},e.teardownPeriscopeLifecycle=function(){this.lifecycleController.destroy(),this.lifecycleController=null},t}(),zt=function(){function t(t){this.analytics=t,this.lapseMap={},this.analytics.on(nt,this.onTickEvent.bind(this)),this.analytics.on(at,this.onTrackFinishedEvent.bind(this)),this.analytics.on(E,this.onAdSkipEvent.bind(this)),this.analytics.on(ct,this.onVideoViewEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=Et(t);if(void 0!==e){var i=this.lapseMap[e.id];if(void 0!==i){i.timePlayedToMs=0;var n=Tt(t);n&&n.contentType!==pt&&!e.shouldLoop&&(this.emit(i,t),i.viewFired=!1)}}},e.onAdSkipEvent=function(t){this.onTickEvent(t);var e=Et(t);if(void 0!==e){var i=this.lapseMap[e.id];this.emit(i,t)}},e.onVideoViewEvent=function(t){var e=Et(t);if(void 0!==e){var i=this.lapseMap[e.id];void 0===i&&(i=this.initializeLapseMapForTrack(e),this.lapseMap[e.id]=i),i.viewFired=!0}},e.onTickEvent=function(t){var e=Et(t);if(void 0!==e){var i=this.lapseMap[e.id];void 0===i&&(i=this.initializeLapseMapForTrack(e),this.lapseMap[e.id]=i),t.isScrubbing?i.timePlayedToMs=e.currentTimeMs:(this.updateTimingData(e,i),this.checkPlaybackLapse(i,t))}},e.initializeLapseMapForTrack=function(t){return{timePlayedMs:0,timePlayedToMs:t.currentTimeMs,viewFired:!1}},e.updateTimingData=function(t,e){var i=t.currentTimeMs-e.timePlayedToMs;e.timePlayedToMs=t.currentTimeMs,e.timePlayedMs+=i},e.checkPlaybackLapse=function(t,e){t.timePlayedMs>1e4&&this.emit(t,e)},e.emit=function(t,e){var i=Tt(e),n=t.viewFired,a=t.timePlayedMs;n&&a>0&&i&&i.contentType!==ft&&(this.analytics.emit(Z,e,{playback_lapse_ms:Math.round(a)}),t.timePlayedMs=0)},t}(),qt=function(t){return e="AD_CTA_TO_ENGAGEMENT_MAPPING_ERROR",(i=new Error("Unable to map CTA type to engagement type for: "+t)).name=e,i;var e,i},Jt=function(){function t(){}return t.set=function(e){t.report=e},t}();p()(Jt,"report",(function(t){}));var Zt=((s={})[X]="playback_start",s[G]="playback_25",s[K]="playback_50",s[Y]="playback_75",s[z]="playback_95",s[q]="playback_complete",s[D]="mrc_view",s[I]="groupm_view",s[x]="1sec_view",s[R]="6sec_view",s[B]="short_form_complete",s[ct]="view",s[j]="play_from_tap",s[ut]="view_threshold",s),Xt=function(){function t(t,e){var i=this;this.promotedLogHandler=e,Object.keys(Zt).forEach((function(e){t.on(e,(function(t,n){var a=Et(t);void 0!==a&&i.log(i.buildEventName(e,a),t,n)}))})),t.on(X,this.logImpression.bind(this)),t.on(M,this.onCtaClickEvent.bind(this)),t.on(rt,this.onVideoSessionEvent.bind(this))}var e=t.prototype;return e.buildEventName=function(t,e){var i=Zt[t];return"video_"+e.displayType+"_"+i},e.log=function(t,e,i,n){void 0===i&&(i={});var a=Et(e),s=this.getPromotedEventData(e,a);if(void 0!==s.impression_id){var r=this.getAmplifyDetailsData(e,a,i),o=JSON.stringify({amplify_details:r}),c=n&&JSON.stringify(n),u=Object.assign(s,r,{event:t,card_event:o,engagement_metadata:c});this.promotedLogHandler.log(u)}},e.logImpression=function(t){var e=Et(t);this.isPromotedTrack(t,e)&&this.log("impression",t)},e.onCtaClickEvent=function(t){var e=Et(t);if(void 0!==e){var i=e.cta;if(void 0!==i)if(e.displayType===lt){var n=bt[i.type];n?this.log("video_"+e.displayType+"_cta_"+n+"_click",t):Jt.report(qt(i.type))}else this.log("video_cta_"+i.type+"_click",t)}},e.onVideoSessionEvent=function(t,e){void 0!==e&&this.log("video_session",t,{},e)},e.isPromotedTrack=function(t,e){return e&&e.impressionId&&e.disclosureType},e.getPromotedEventData=function(t,e){var i=e.disclosureType||t.disclosureType;return{impression_id:e.impressionId||t.impressionId,earned:"earned"===i}},e.getAmplifyDetailsData=function(t,e,i){var n=Tt(t),a=Mt(t)||{};return Object.assign({content_id:n.contentId,dynamic_preroll_type:a.dynamicPrerollType,preroll_uuid:a.contentId,preroll_owner_id:a.publisherId,video_uuid:e.contentId,video_type:e.displayType===dt?"video":"ad",video_is_muted:t.isMuted,video_visibility:Math.floor(100*t.percentVisible)},i)},t}(),Qt=function(){function t(t){this.analytics=t,this.analytics.on(nt,this.onTickEvent.bind(this))}return t.prototype.onTickEvent=function(t){var e=Et(t);void 0!==e&&(t.isScrubbing&&void 0===this.scrubbingStartTime?this.scrubbingStartTime=e.currentTimeMs:t.isScrubbing||void 0===this.scrubbingStartTime||(e.currentTimeMs<this.scrubbingStartTime&&this.analytics.emit($,t),this.scrubbingStartTime=void 0))},t}(),$t=((r={})[ct]="video_view",r[j]="play_from_tap",r[ut]="view_threshold",r[W]="video_mrc_audible_view",r[D]="video_mrc_view",r[R]="video_6sec_view",r[B]="video_short_form_complete",r[X]="playback_start",r[G]="playback_25",r[K]="playback_50",r[Y]="playback_75",r[z]="playback_95",r[q]="playback_complete",r[V]="intent_to_play",r[U]="play",r[H]="pause",r[Q]="replay",r[O]="loop",r[F]="mute",r[st]="unmute",r[k]="full_screen",r[tt]="shrink",r[Z]="playback_lapse",r[J]="error",r[et]="playback_startup_error",r[ot]="video_quality_view",r[E]="video_ad_skip",r),te=["playback_lapse","video_1sec_view","shrink","full_screen"].reduce((function(t,e){return t[e]=!0,t}),{}),ee="tweet",ie="client_event",ne="live_video_heartbeat_event",ae=7,se=13,re=16,oe=26,ce=28,ue=1,le=2,de=1,he=2,pe=["appplayer","poll2choice_video","poll3choice_video","poll4choice_video","promo_video_convo","promo_video_website","video_direct_message"],fe=/^([0-9]{1,2})_([0-9]+)$/,ve=function(){function t(t,e,i){var n=this;this.scribeHandler=e,this.context=i||{},this.isAdFormatsCard=-1!==pe.indexOf(this.context.cardType),Object.keys($t).forEach((function(e){t.on(e,(function(t,i,a){n.scribe($t[e],t,i,a)}))})),t.on(M,this.onCtaClickEvent.bind(this)),t.on(L,this.onCtaImpressionEvent.bind(this)),t.on(A,this.onHeartbeatEvent.bind(this))}var e=t.prototype;return e.onCtaClickEvent=function(t){var e=Et(t).cta;e&&e.type&&this.scribe("cta_"+e.type+"_click",t)},e.onCtaImpressionEvent=function(t){var e=Et(t).cta;e&&e.type&&this.scribe("cta_"+e.type+"_impression",t)},e.onHeartbeatEvent=function(t,e,i){var n=Tt(t);if(void 0!==n){var a;switch(n.contentType){case ft:case ht:a=ne;break;default:a=ie}this.scribe("heartbeat",t,e,i,a)}},e.scribe=function(t,e,i,n,a){void 0===i&&(i={}),void 0===n&&(n={}),void 0===a&&(a=ie);var s,r,o=Tt(e)||{},c=Et(e)||{},u=Mt(e)||{},l=e.session||{},d=(e.features||{}).isLiveTimecodeEnabled&&c.requestedTimecode>0?1e3*c.requestedTimecode:void 0;this.isActionSupportedInClientMediaEvent(t)&&(s={media_client_event_type:(r={},r[t]=n,r),session_state:{session_id:l.id,content_video_identifier:me(this.getContentIdentifier(o),this.context.scribeContext),video_ads_passthrough_data:e.videoAnalyticsScribePassthrough,live_event_identifier:this.getLiveEventIdentifier(e,o.contentType),tweet_id:this.getTweetId(e.source,o.contentType)},playing_media_state:{video_type:c.displayType===dt?le:ue,media_asset_url:this.getVariantUrl(c),media_timecode_millis:Lt(d),media_metadata:{broadcast_id:c.broadcastId,twitter_publisher_id:Lt(c.publisherId),publisher_identifier:_e(c.publisherId,c.periscopePublisherId,this.context.scribeContext)},broadcast_media_state:ge(c.contentType,c.isLive)},player_state:{is_muted:e.isMuted}});var h=Object.assign({},this.getBaseItem(e.source,e.eventId),{media_asset_url:this.getVariantUrl(c),video_uuid:c.contentId,video_owner_id:c.publisherId,video_type:c.displayType===dt?"video":"ad",promoted_id:c.impressionId||e.impressionId,content_id:o.contentId,dynamic_preroll_type:u.dynamicPrerollType,preroll_uuid:u.contentId,preroll_owner_id:u.publisherId,publisher_id:o.publisherId,media_session_id:l.id,video_analytics_scribe_passthrough:e.videoAnalyticsScribePassthrough,client_media_event:s,media_timecode_millis:d,disclosure_type:c.disclosureType||e.disclosureType},i,this.getLexMetadata(e,o));this.scribeHandler.log({namespace:{element:this.getScribeElement(o),action:t},category:a,data:{items:[h]}})},e.getContentIdentifier=function(t){var e=t.contentId,i=this.parseMediaKeyString(e);if(i)return{media_platform_identifier:i};switch(t.contentType){case vt:case pt:case ft:case ht:return this.getMediaPlatformIdentifierUsingDefaultCategory(t);case gt:return this.isAdFormatsCard?{media_platform_identifier:{media_category:this.getMediaEntityCategoryUsingPlaybackUrl(t),media_id:e}}:{amplify_card_identifier:{vmap_url:t.vmapUrl,content_id:e}};case _t:case mt:case yt:default:return{unknown_identifier:{content_id:e}}}},e.parseMediaKeyString=function(t){var e=fe.exec(t)||[],i=e[1],n=e[2],a=+i;if(a&&n)return{media_category:a,media_id:n}},e.getMediaPlatformIdentifierUsingDefaultCategory=function(t){var e=this.defaultMediaCategory(t);return e?{media_platform_identifier:{media_category:e,media_id:t.contentId}}:{unknown_identifier:{content_id:t.contentId}}},e.getMediaEntityCategoryUsingPlaybackUrl=function(t){var e=this.getVariantUrl(t);if(e){if(-1!==e.indexOf("amplify_video"))return se;if(-1!==e.indexOf("ext_tw_video"))return ae}},e.defaultMediaCategory=function(t){switch(t.contentType){case pt:return re;case ft:return oe;case ht:return ce;case vt:return this.getMediaEntityCategoryUsingPlaybackUrl(t);default:return}},e.getLiveEventIdentifier=function(t,e){return t.eventId?{lex_event_identifier:{lex_event_id:t.eventId}}:e===ft?{legacy_live_event_identifier:{legacy_live_event_id:t.source.id}}:void 0},e.getTweetId=function(t,e){return e===ht||e===ft?t.tweetId:t.type===ee?t.id:void 0},e.getScribeElement=function(t){switch(t.contentType){case _t:return"vine_player";case pt:return"gif_player";case gt:return"platform_amplify_card";case ft:case ht:return"live_video_player";case yt:return"partner_video_player";case mt:return"periscope_player";case vt:default:return"video_player"}},e.getBaseItem=function(t,e){var i=this.context.baseScribeItem;return i||(t.type===ee?{id:t.id,item_type:"0"}:t.tweetId?{id:t.tweetId,item_type:"0"}:e?{id:e,item_type:"28"}:void 0)},e.getLexMetadata=function(t,e){var i=this.context.scribeContext||{},n={},a={};return e.broadcastId&&(n.is_replay_broadcast=!e.isLive,a.tweet_id=t.source.tweetId,"live_event_timeline"===i.page&&"tweet"!==i.component?n.host_broadcast_id=e.broadcastId:n.target_broadcast_id=e.broadcastId),t.eventId&&("live_event_timeline"===i.page&&"tweet"!==i.component?a.host_event_id=t.eventId:a.target_event_id=t.eventId),{live_broadcast_details:n,live_video_event_details:a}},e.getVariantUrl=function(t){var e=t.variants&&t.variants[t.currentVariantIndex];return e&&e.src},e.isActionSupportedInClientMediaEvent=function(t){return!te[t]},t}();function ye(t){return t&&"messages"===t.page}function me(t,e){return ye(e)?{scrubbed_identifier:{}}:t}function _e(t,e,i){return ye(i)?{scrubbed_publisher_identifier:{}}:t&&e?{twitter_periscope_publisher_identifier:{twitter_id:Lt(t),periscope_id:e}}:t?{twitter_publisher_identifier:{id:Lt(t)}}:e?{periscope_publisher_identifier:{id:e}}:{unknown_publisher_identifier:{}}}function ge(t,e){if(t===ht||t===ft||t===mt)return{broadcast_state:e?de:he}}var be=function(){function t(t){this.analytics=t,this.analytics.on(Q,this.onReplayEvent.bind(this)),this.analytics.on(at,this.onTrackFinishedEvent.bind(this)),this.analytics.on(V,this.onInitialIntendToPlayEvent.bind(this))}var e=t.prototype;return e.onInitialIntendToPlayEvent=function(t){this.resetLatencyStartDate(t.intentToPlayTime)},e.onReplayEvent=function(){this.resetLatencyStartDate()},e.onTrackFinishedEvent=function(t){this.resetLatencyStartDate(),this.trackId!==t.currentTrackId&&(this.trackId=t.currentTrackId)},e.resetLatencyStartDate=function(t){this.latencyStartDate=t||new Date},e.getLatencyData=function(){if(void 0!==this.latencyStartDate)return{latency:new Date-this.latencyStartDate}},t}(),Te=[{progress:.25,event:G},{progress:.5,event:K},{progress:.75,event:Y},{progress:.95,event:z},{progress:1,event:q}],Ee=function(){function t(t){this.analytics=t,this.eventMap={},this.playbackLatencyListener=new be(t),this.analytics.on(at,this.onTrackFinishedEvent.bind(this)),this.analytics.on(nt,this.onTickEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=Et(t);void 0!==e&&(e.shouldLoop||(this.eventMap[t.currentTrackId]={}))},e.onTickEvent=function(t){var e=Et(t);if(void 0!==e&&e.durationMs){var i=this.eventMap[e.id];void 0===i&&(i={},this.eventMap[e.id]=i),this.checkAllTentpoles(e,i,t)}},e.checkAllTentpoles=function(t,e,i){if(i.isPlaying){var n=t.durationMs,a=t.currentTimeMs,s=this.playbackLatencyListener.getLatencyData()||{},r={latency_millis:s.latency,cache_info:{notCached:{}}};this.emitOnce(X,e,i,s,r),t.isLive||this.checkProgressTentpoles(n,a,e,i)}},e.checkProgressTentpoles=function(t,e,i,n){var a=this;Te.forEach((function(s){var r=s.progress*t;e>=r-1e3&&e<=r+1e3&&a.emitOnce(s.event,i,n)}))},e.emitOnce=function(t,e,i,n,a){e[t]||(this.analytics.emit(t,i,n,a),e[t]=!0)},t}(),Pe=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100],Me=((o={})[_t]=2,o[pt]=3,o[gt]=1,o[vt]=1,o[ft]=1,o[mt]=5,o[ht]=1,o),we=function(){function t(t){this.analytics=t,this.sessionDataStore={},this.analytics.on(nt,this.onTickEvent.bind(this)),this.analytics.on(k,this.onFullscreenEvent.bind(this)),this.analytics.on(tt,this.onShrinkEvent.bind(this)),this.analytics.on(at,this.onTrackFinishedEvent.bind(this)),this.analytics.on(E,this.onTrackInterrupt.bind(this)),this.analytics.on(it,this.onTrackInterrupt.bind(this))}var e=t.prototype;return e.onTickEvent=function(t){var e=Et(t);if(void 0!==e){var i=this.getOrCreateNewSessionDataForTrack(e,t);t.isScrubbing?i.currentTimeMs=e.currentTimeMs:this.updateViewData(e,i,t)}},e.onFullscreenEvent=function(t){var e=Et(t);void 0!==e&&(this.getOrCreateNewSessionDataForTrack(e,t).isFullscreenMode=!0)},e.onShrinkEvent=function(t){var e=Et(t);void 0!==e&&(this.getOrCreateNewSessionDataForTrack(e,t).isFullscreenMode=!1)},e.onTrackFinishedEvent=function(t){var e=Et(t);if(void 0!==e){var i=this.sessionDataStore[e.id];if(void 0!==i)if(e.shouldLoop)i.currentTimeMs=0;else{if(i.timeWatchedMs>0){var n=this.constructVideoSessionDetails(i,e);this.emitVideoSessionEvent(t,n)}this.sessionDataStore[e.id]=void 0}}},e.onTrackInterrupt=function(t){var e=Et(t);if(void 0!==e){var i=this.sessionDataStore[e.id];if(void 0!==i){if(i.timeWatchedMs>0){var n=this.constructVideoSessionDetails(i,e);this.emitVideoSessionEvent(t,n)}this.sessionDataStore[e.id]=void 0}}},e.getOrCreateNewSessionDataForTrack=function(t,e){var i=this.sessionDataStore[t.id];return void 0===i&&(i={sizesInfoAtTheStart:e.sizesInfo,currentTimeMs:t.currentTimeMs,isFullscreenMode:!1,timeWatchedMs:0,timeWatchedFullscreenMs:0,timeWatchedWithAudioMs:0,timeWatchedFullscreenWithAudioMs:0,watchedMsByInViewPct:this.generateNewAggregateHistogram(),watchedWithAudioMsByInViewPct:this.generateNewAggregateHistogram(),watchedMsByViewportPct:this.generateNewAggregateHistogram(),maxContinuousWatchedMsByInViewPct:this.generateNewMaxContinuousHistogram(),maxContinuousWatchedWithAudioMsByInViewPct:this.generateNewMaxContinuousHistogram()},this.sessionDataStore[t.id]=i),i},e.generateNewAggregateHistogram=function(){for(var t,e={},i=b(Pe);!(t=i()).done;){e[t.value]=0}return e},e.generateNewMaxContinuousHistogram=function(){for(var t,e={},i=b(Pe);!(t=i()).done;){e[t.value]={current:0,max:0}}return e},e.resetContinuousViewDataForHistogram=function(t){for(var e,i=b(Pe);!(e=i()).done;){var n=e.value;this.resetContinuousViewDataForBucket(t[n])}},e.resetContinuousViewDataForBucket=function(t){t.max=Math.max(t.current,t.max),t.current=0},e.updateViewData=function(t,e,i){var n=t.currentTimeMs-e.currentTimeMs,a=e.isFullscreenMode?1:i.percentVisible,s=e.isFullscreenMode?1:i.percentOfViewportOccupied;e.currentTimeMs=t.currentTimeMs,n<0||(e.timeWatchedMs+=n,this.updateAggregateHistogram(e.watchedMsByInViewPct,a,n),this.updateAggregateHistogram(e.watchedMsByViewportPct,s,n),this.updateMaxContinuousHistogram(e.maxContinuousWatchedMsByInViewPct,a,n),i.isMuted?this.resetContinuousViewDataForHistogram(e.maxContinuousWatchedWithAudioMsByInViewPct):(e.timeWatchedWithAudioMs+=n,this.updateAggregateHistogram(e.watchedWithAudioMsByInViewPct,a,n),this.updateMaxContinuousHistogram(e.maxContinuousWatchedWithAudioMsByInViewPct,a,n)),e.isFullscreenMode&&(e.timeWatchedFullscreenMs+=n,i.isMuted||(e.timeWatchedFullscreenWithAudioMs+=n)))},e.updateAggregateHistogram=function(t,e,i){if(0!==e)for(var n,a=100*e,s=b(Pe);!(n=s()).done;){var r=n.value;a>=r&&(t[r]+=i)}},e.updateMaxContinuousHistogram=function(t,e,i){if(0!==e)for(var n,a=100*e,s=b(Pe);!(n=s()).done;){var r=n.value;a>=r?t[r].current+=i:t[r].current>0&&this.resetContinuousViewDataForBucket(t[r])}else this.resetContinuousViewDataForHistogram(t)},e.constructVideoSessionDetails=function(t,e){return{video_details:{is_preroll_video:e.displayType===lt,video_length:Math.round(e.durationMs),time_watched:Math.round(t.timeWatchedMs),time_watched_fullscreen:Math.round(t.timeWatchedFullscreenMs),time_watched_with_audio:Math.round(t.timeWatchedWithAudioMs),time_watched_fullscreen_with_audio:Math.round(t.timeWatchedFullscreenWithAudioMs),time_watched_100_with_audio:Math.round(t.watchedWithAudioMsByInViewPct[100]),video_type:Me[e.contentType],watched_ms_by_in_view_pct:this.constructAggregateHistogramPayload(t.watchedMsByInViewPct),watched_with_audio_ms_by_in_view_pct:this.constructAggregateHistogramPayload(t.watchedWithAudioMsByInViewPct),watched_ms_by_viewport_pct:this.constructAggregateHistogramPayload(t.watchedMsByViewportPct),max_continuous_watched_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(t.maxContinuousWatchedMsByInViewPct),max_continuous_watched_with_audio_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(t.maxContinuousWatchedWithAudioMsByInViewPct),sizes_info_at_the_start:{viewport_size:t.sizesInfoAtTheStart.viewportSize,ad_size:t.sizesInfoAtTheStart.mediaSize}}}},e.constructAggregateHistogramPayload=function(t){for(var e,i={},n=b(Pe);!(e=n()).done;){var a=e.value;i[a]=Math.round(t[a])}return{histogram:i}},e.constructMaxContinuousHistogramPayload=function(t){for(var e,i={},n=b(Pe);!(e=n()).done;){var a=e.value,s=t[a];i[a]=Math.round(Math.max(s.current,s.max))}return{histogram:i}},e.emitVideoSessionEvent=function(t,e){this.analytics.emit(rt,t,e)},t}(),Se=[ct,j,ut,x,I,W,D,ot,R,B],ke=[x,W,D,ot],Ie=function(){function t(t,e){this.analytics=t,this.context=e,this.eventMap={},this.analytics.on(nt,this.onTickEvent.bind(this)),this.analytics.on(at,this.onTrackFinishedEvent.bind(this)),this.analytics.on(H,this.onPauseEvent.bind(this)),this.analytics.on(q,this.onPlaybackComplete.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=Et(t);if(void 0!==e){var i=this.eventMap[e.id];void 0!==i&&(e.shouldLoop?i.timePlayedToMs=0:this.eventMap[e.id]=void 0)}},e.onPlaybackComplete=function(t){var e=Et(t);if(void 0!==e){var i=this.eventMap[e.id];void 0!==i&&this.context&&this.context.enableShortFormCompleteLogging&&this.emitOnce(B,i,t)}},e.onPauseEvent=function(t){this.resetContinuousViewEventTimingData(t)},e.onTickEvent=function(t){var e=Et(t);if(void 0!==e){var i=this.eventMap[e.id];if(void 0===i){i={timePlayedToMs:e.currentTimeMs};for(var n,a=b(Se);!(n=a()).done;){i[n.value]={timePlayedMs:0,visibilityWeightedTimePlayedMs:0,fired:!1}}this.eventMap[e.id]=i}t.isScrubbing?(i.timePlayedToMs=e.currentTimeMs,this.resetContinuousViewEventTimingData(t)):(this.updateTimingData(e,i,t),this.checkViewEvents(e,i,t)),this.checkPlayFromTap(i,t)}},e.updateTimingData=function(t,e,i){var n=t.currentTimeMs-e.timePlayedToMs;e.timePlayedToMs=t.currentTimeMs;var a=i.percentVisible;a>=1&&(e[ut].timePlayedMs+=n),a>=1?e[x].timePlayedMs+=n:e[x].timePlayedMs=0,a>=.5&&wt(i)?e[W].timePlayedMs+=n:e[W].timePlayedMs=0,a>=.5?e[D].timePlayedMs+=n:e[D].timePlayedMs=0,a>=1&&!i.isMuted&&(e[I].timePlayedMs+=n),a>=.5?e[ot].timePlayedMs+=n:e[ot].timePlayedMs=0,e[R].timePlayedMs+=n,a>=.5&&(e[R].visibilityWeightedTimePlayedMs+=a*n),e[B].timePlayedMs+=n},e.resetContinuousViewEventTimingData=function(t){var e=this.eventMap[t.currentTrackId];if(void 0!==e)for(var i,n=b(ke);!(i=n()).done;){e[i.value].timePlayedMs=0}},e.checkViewEvents=function(t,e,i){var n;e[ut].timePlayedMs>=(!(n=t).isLive&&n.durationMs>0&&!n.shouldLoop?Math.min(n.durationMs-500,3e3):3e3)&&(this.emitOnce(ut,e,i),this.emitOnce(ct,e,i)),e[x].timePlayedMs>=1e3&&this.emitOnce(x,e,i),e[I].timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?.5*t.durationMs:Number.MAX_SAFE_INTEGER}(t)&&this.emitOnce(I,e,i),e[W].timePlayedMs>=2e3&&this.emitOnce(W,e,i),e[D].timePlayedMs>=2e3&&this.emitOnce(D,e,i),e[ot].timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.95*t.durationMs,1e4):1e4}(t)&&this.emitOnce(ot,e,i);var a=e[R];a.timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.95*t.durationMs,6e3):6e3}(t)&&a.visibilityWeightedTimePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(.5*t.durationMs,3e3):3e3}(t)&&this.emitOnce(R,e,i),this.context&&this.context.enableShortFormCompleteLogging&&e[B].timePlayedMs>=15e3&&this.emitOnce(B,e,i)},e.checkPlayFromTap=function(t,e){e.isPlaying&&!e.isPreview&&(this.emitOnce(j,t,e),this.emitOnce(ct,t,e))},e.emitOnce=function(t,e,i){e[t].fired||(this.analytics.emit(t,i),e[t].fired=!0)},t}(),Ae=function(t){function e(e,i,n,a){var s;(s=t.call(this)||this).scribeListener=new ve(u()(s),e,a),s.promotedLogListener=new Xt(u()(s),i),s.tentpoleListener=new Ee(u()(s)),s.viewListener=new Ie(u()(s),a),s.playbackLapseListener=new zt(u()(s)),s.errorListener=new At(u()(s)),s.beaconListener=new kt(u()(s)),s.rewindListener=new Qt(u()(s)),s.heartbeatListener=new Vt(u()(s)),s.loopListener=new Dt(u()(s)),s.intendToPlayListener=new Wt(u()(s)),s.videoSessionListener=new we(u()(s)),s.ctaImpressionListener=new It(u()(s));var r=new jt(n,a),o=new Gt(r);return s.lifecycleListener=new Yt(u()(s),o),s}d()(e,t);var i=e.prototype;return i.onTickEvent=function(t){this.emit(nt,t)},i.onReplay=function(t){var e=Et(t);void 0!==e&&(e.shouldLoop||this.emit(Q,t))},i.onTrackFinished=function(t){this.emit(at,t)},i.onIntendToPlay=function(t){this.emit(N,t)},i.onPlay=function(t){this.emit(U,t)},i.onPause=function(t){this.emit(H,t)},i.onMute=function(t){this.emit(F,t)},i.onUnmute=function(t){this.emit(st,t)},i.onFullScreen=function(t){this.emit(k,t)},i.onShrink=function(t){this.emit(tt,t)},i.onAdSkip=function(t){this.emit(E,t)},i.onCtaImpression=function(t){this.emit(w,t)},i.onCtaClick=function(t){this.emit(M,t)},i.onConfigLoaded=function(t){this.emit(P,t)},i.onError=function(t,e){this.emit(S,t,e)},i.onTeardown=function(t){this.emit(it,t)},e}(m.a);e.a=Ae},aLgo:function(t,e,i){i("aokA")("iterator")},cARO:function(t,e,i){var n=i("uLp7"),a=Date.prototype,s=a.toString,r=a.getTime;new Date(NaN)+""!="Invalid Date"&&n(a,"toString",(function(){var t=r.call(this);return t==t?s.call(this):"Invalid Date"}))},hBpG:function(t,e,i){"use strict";var n=i("ax0f"),a=i("0FSu").find,s=i("7St7"),r=i("znGZ"),o=!0,c=r("find");"find"in[]&&Array(1).find((function(){o=!1})),n({target:"Array",proto:!0,forced:o||!c},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("find")},ho0z:function(t,e,i){var n=i("1Mu/"),a=i("q9+l").f,s=Function.prototype,r=s.toString,o=/^\s*function ([^ (]*)/;n&&!("name"in s)&&a(s,"name",{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},jwue:function(t,e,i){"use strict";var n=i("ax0f"),a=i("6OVi");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},kH1Z:function(t,e,i){i("ax0f")({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},mf9H:function(t,e,i){"use strict";i.d(e,"a",(function(){return d})),i.d(e,"b",(function(){return h})),i.d(e,"c",(function(){return p}));var n=i("KEM+"),a=i.n(n),s=i("6/RC"),r=i("HT/6"),o=i("jHwr"),c=i("+d3d"),u=i("fs1G"),l=(t,e)=>{if(0===t.length)return;let i=t[0],n=e(i);for(let a=1;a<t.length;a++){const s=t[a],r=e(s);r<n&&(i=s,n=r)}return i};const d=.25;class h{constructor(t=d){a()(this,"_players",[]),a()(this,"_setPlayerState",(t,e)=>{t.previousPlaybackState=t.playbackState,t.playbackState=e}),a()(this,"_updatePlaybackStates",()=>{const t=this._players.find(t=>t.playbackState===r.a.USER_PLAYING);t&&!this._canPlay(t)?(this._pausePlayer(t),this._triggerAutoplay()):t?this._stopAllExcept(t):this._triggerAutoplay()}),a()(this,"_scheduleUpdate",s.canUseDOM?Object(c.a)(Object(o.a)(this._updatePlaybackStates,window.requestIdleCallback?t=>window.requestIdleCallback(t,{timeout:200}):window.requestAnimationFrame),300,{leading:!1,trailing:!0}):u.a),this._minimumVisibilityForAutoplay=t}register({canAutoplay:t,onAutoPlayRequest:e,onFullscreenEntered:i,onFullscreenExited:n,onPauseRequest:a,isLooping:s}){const o={placement:void 0,playbackState:r.a.INITIAL,previousPlaybackState:r.a.INITIAL,commandHandlers:{onAutoPlayRequest:e,onFullscreenEntered:i,onFullscreenExited:n,onPauseRequest:a},canAutoplay:t,isLooping:s};return this._players.push(o),{reset:()=>this._handleReset(o),signalFullscreenChange:t=>this._handleFullscreenChanged(t),signalPlacementChange:t=>this._handlePlacementChange(o,t),signalPlay:()=>this._handlePlay(o),signalPause:()=>this._handlePause(o),signalPlaybackFinish:()=>this._handlePlaybackFinished(o),unregister:()=>this._handleUnregister(o)}}_handleFullscreenChanged(t){this._players.forEach(e=>{const{onFullscreenEntered:i,onFullscreenExited:n}=e.commandHandlers;t&&i?i():!t&&n&&n()})}_handlePlacementChange(t,e){const i=e.scrollY();t.placement=e,this._scrollY!==i&&(this._scrollY=i),t.playbackState===r.a.FINISHED&&0===e.visibleFraction()&&this._setPlayerState(t,r.a.INITIAL),this._scheduleUpdate()}_handlePlay(t){t.playbackState!==r.a.AUTO_PLAYING&&(t.previousPlaybackState===r.a.AUTO_PLAYING&&t.isLooping?this._setPlayerState(t,r.a.AUTO_PLAYING):this._setPlayerState(t,r.a.USER_PLAYING)),this._stopAllExcept(t)}_handlePause(t){t.playbackState!==r.a.AUTO_PAUSED&&this._setPlayerState(t,r.a.USER_PAUSED)}_handlePlaybackFinished(t){this._setPlayerState(t,r.a.FINISHED)}_handleReset(t){this._setPlayerState(t,r.a.INITIAL),this._scheduleUpdate()}_handleUnregister(t){const e=this._players.indexOf(t);e>=0&&this._players.splice(e,1),this._scheduleUpdate()}_triggerAutoplay(){const t=this._players.filter(t=>this._canAutoPlay(t)),e=this._findBestAutoplayFit(t);e?(this._stopAllExcept(e),this._autoPlayVideo(e)):this._players.forEach(t=>{t.playbackState===r.a.AUTO_PLAYING&&this._pausePlayer(t)})}_canAutoPlay(t){const e=!!t.placement&&t.placement.visibleFraction()>=this._minimumVisibilityForAutoplay,i=t.playbackState===r.a.USER_PAUSED,n=t.playbackState===r.a.FINISHED;return t.canAutoplay&&e&&!i&&!n}_canPlay(t){const e=!!t.placement&&t.placement.visibleFraction()>=this._minimumVisibilityForAutoplay,i=!!t.placement&&t.placement.visibleFraction()>0;return!t.placement||i||e}_stopAllExcept(t){this._players.forEach(e=>{e===t||e.playbackState!==r.a.USER_PLAYING&&e.playbackState!==r.a.AUTO_PLAYING||this._pausePlayer(e)})}_pausePlayer(t){const{onPauseRequest:e}=t.commandHandlers;this._setPlayerState(t,r.a.AUTO_PAUSED),e()}_autoPlayVideo(t){const{onAutoPlayRequest:e}=t.commandHandlers;this._setPlayerState(t,r.a.AUTO_PLAYING),e()}_findBestAutoplayFit(t){return 0===this._scrollY?l(t,this._getDistanceToTop):l(t,this._getDistanceToCenter)}_getDistanceToCenter(t){return t.placement?t.placement.distanceToCenter():Number.MAX_VALUE}_getDistanceToTop(t){return t.placement?t.placement.distanceToTop():Number.MAX_VALUE}}const p=new h},qL0z:function(t,e,i){var n=i("+nzf"),a=i("42G/");t.exports=function(t,e,i){var s=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var o=0;o<16;++o)e[s+o]=r[o];return e||a(r)}},sVFb:function(t,e,i){var n=i("ax0f"),a=i("9JhN"),s=i("ZORK"),r=[].slice,o=function(t){return function(e,i){var n=arguments.length>2,a=n?r.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,a)}:e,i)}};n({global:!0,bind:!0,forced:/MSIE .\./.test(s)},{setTimeout:o(a.setTimeout),setInterval:o(a.setInterval)})},ssvU:function(t,e,i){i("ax0f")({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},zh11:function(t,e,i){"use strict";var n=i("hpdy"),a=i("dSaG"),s=[].slice,r={},o=function(t,e,i){if(!(e in r)){for(var n=[],a=0;a<e;a++)n[a]="a["+a+"]";r[e]=Function("C,a","return new C("+n.join(",")+")")}return r[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=s.call(arguments,1),r=function(){var n=i.concat(s.call(arguments));return this instanceof r?o(e,n.length,n):e.apply(t,n)};return a(e.prototype)&&(r.prototype=e.prototype),r}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~ondemand.InlinePlayer~loader.AudioOnlyVideoPlayer.db8fb915.js.map