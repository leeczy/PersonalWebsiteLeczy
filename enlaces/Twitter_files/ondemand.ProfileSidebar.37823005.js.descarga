(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{hIbf:function(e,t,a){"use strict";a.r(t),a.d(t,"ProfileSidebarContainer",(function(){return k})),a.d(t,"toRelativePath",(function(){return D}));a("MvUL"),a("kYxP");var i=a("KEM+"),r=a.n(i),s=a("ERkP"),n=a("k49u"),d=a("v6aA"),o=a("es0u"),c=(a("IAdD"),a("hqKg")),p=a("8UdT"),l=a("FLCi"),m=a("P1r1"),h=a("wrlS"),u=a("XOJV"),I=a("YjVx");const b=(e,t)=>Object(I.a)(e,t),f=[],g=Object(c.createSelector)((e,t)=>b(Object(h.c)(e),t).selectEntries(e),u.a.createHydratedSelector,m.l,(e,t,a)=>Object(l.a)(e,e=>{const i=e.type===p.b.Tweet&&t(e.content.id);return!i||i.tombstoneInfo||i.isDeleted||i.possibly_sensitive&&!a||!i.extended_entities||!i.extended_entities.media?f:i.extended_entities.media.map(t=>({mediaItem:t,entry:e}))})),w=(e,t)=>b(e,t).fetchInitial();var S=a("rxPX"),x=a("0KEI"),_=a("MDbM");const E=(e,t)=>g(e,t.userId),M=(e,t)=>((e,t)=>b(Object(h.c)(e),t).selectInitialFetchStatus(e))(e,t.userId)||_.a.LOADING;var y=Object(S.a)().propsFromState(()=>({mediaItemsWithEntry:E,mediaFetchStatus:M})).adjustStateProps(({mediaItemsWithEntry:e,mediaFetchStatus:t})=>({mediaItems:e.map(e=>Object.assign({},e.mediaItem)),mediaItemsWithEntry:e,mediaFetchStatus:t})).propsFromActions(()=>({createLocalApiErrorHandler:Object(x.d)("PROFILE_SIDE_BAR"),fetchRecentMediaIfNeeded:w})),A=a("kGix"),O=a("3XMw"),R=a.n(O),v=a("fs1G"),L=a("q2Cp"),j=a("Qwev"),P=a("rHpw"),C=a("3dad");const F=R.a.b327c129,U={[n.a.NotAuthorizedToViewUser]:{customAction:v.a}};class k extends s.Component{constructor(...e){super(...e),r()(this,"_fetchRecentUserMedia",()=>{const{createLocalApiErrorHandler:e,fetchRecentMediaIfNeeded:t,userId:a}=this.props;t(this.context.featureSwitches,a).catch(e(U))})}componentDidUpdate(e){e.userId!==this.props.userId&&this._fetchRecentUserMedia()}componentDidMount(){this._fetchRecentUserMedia()}render(){const{mediaFetchStatus:e}=this.props;return e&&e!==A.a.LOADING?this._renderSidebar():s.createElement(j.a,{accessibilityLabel:"Loading profile sidebar"})}_renderSidebar(){const e=this._getImages();return s.createElement(o.a,{profileUserId:this.props.userId},e.length>=2&&!this.props.hideMediaModule?s.createElement(L.a,{cacheLocationKey:"profileSidebar",images:e,singleImageMaxAspectRatio:P.a.theme.aspectRatios.landscape,singleImageMinAspectRatio:P.a.theme.aspectRatios.landscape}):null)}_getImages(){const{mediaItems:e,mediaItemsWithEntry:t}=this.props;return t.map((t,a)=>{var i;const{mediaItem:r,entry:s}=t,n={pathname:D(r.expanded_url),state:{mediaItems:{items:e,index:a},forwardPivotInfo:null==(i=s.content)?void 0:i.forwardPivot}},d=C.a.getOriginalImage(r);return d&&{width:d.width,height:d.height,url:d.url,backgroundColor:C.a.getBackgroundColor(r),cropCandidates:C.a.getCropCandidates(r),accessibilityLabel:r.ext_alt_text||F,shouldShowAltLabel:!1,expandedUrl:n}}).filter(Boolean)}}r()(k,"contextType",d.a);const D=e=>e.replace("https://twitter.com",""),N=y(k);t.default=N}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.ProfileSidebar.37823005.js.map