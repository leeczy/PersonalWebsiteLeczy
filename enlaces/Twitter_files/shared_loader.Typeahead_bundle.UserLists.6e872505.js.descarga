(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"3EFP":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return c}));const o="ArrowDown",i="ArrowUp",n="Enter",r="Escape",a="ESC",c="Tab"},"4e/K":function(e,t,s){"use strict";s.r(t),s.d(t,"TypeaheadInput",(function(){return O})),s.d(t,"styles",(function(){return S}));s("IAdD");var o=s("KEM+"),i=s.n(o),n=s("3EFP"),r=s("ERkP"),a=s("3XMw"),c=s.n(a),l=s("VwDm"),d=s("oQhu"),h=s("WPfJ"),u=s("Es6L"),p=s("OEYw"),m=s("GZwR"),f=s("rHpw"),_=f.a.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}}),y=s("k/Ka"),b=s("MWbm"),g=s("xoZN"),I=s("6OUF"),v=s("pf9B"),w=s("cHvH"),x=s("oEoC");const R=c.a.f065ba8c,E=Object(d.a)(e=>({bottom:0,paddingBottom:`calc(2.5 * ${f.a.theme.spaces.jumbo})`,position:"fixed",top:e+"px",transform:[{translate3d:"0,0,0"}]})),D=e=>Object(y.a)("form",Object.assign({},e,{action:"#",style:[_.initial,S.wrapper]}));let C=1;class O extends r.Component{constructor(e,t){super(e,t),i()(this,"_render",({windowWidth:e})=>{const{alwaysOpen:t,disableClearButton:s,inputStyle:o,placeholder:i,rounded:n,renderInSearchField:a,shouldAutoFocus:c,shouldFocusOnClear:d,style:h,testID:u}=this.props,p=this.state.showTypeaheadDropdown||t;return r.createElement(b.a,{onLayout:this._handleLayout,ref:this._setRootContainerNode,style:[S.root,h]},r.createElement(g.a,{onKeyDown:this._handleKeyDown,style:S.keydownInputListener},r.createElement(D,{accessibilityLabel:i,accessibilityRole:"search",onSubmit:this._handleFormSubmit},r.createElement(b.a,{ref:this._setInputContainerNode,style:o},r.createElement(I.a,{Icon:l.a,ariaActiveDescendant:this.state.ariaDescendantId,ariaAutocomplete:"list",ariaExpanded:p,ariaLabel:R,ariaOwns:this._dropdownDomId,ariaRole:"combobox",autoComplete:"off",autoCorrect:!1,autoFocus:c,contentBelow:a&&a(),focusOnClear:d,onChange:this._handleInputChange,onClear:this._handleInputClear,onFocus:this._handleInputFocus,onLayout:this._handleInputLayoutChanged,placeholder:i,ref:this._setInputRef,returnKeyType:"search",spellCheck:"false",styleType:n?"pill":"selection",testID:u,value:this.state.query,withClearButton:!s&&this.state.showTypeaheadDropdown})),r.createElement(b.a,{style:S.typeaheadContainer},p?this._renderDropdown(e):null))))}),i()(this,"_renderDropdown",e=>{const{filter:t,getItemDisabledMessage:s,getItemIsDisabled:o,getTopicExactMatch:i,getUserExactMatch:n,injectedItems:a,isModal:c,maxEvents:l,maxTopics:d,renderEmptyState:h,renderUserDecoration:m,selectedItems:_,shouldDeferPrefetch:y,source:b,withFixedPositioning:g,withSectionDivider:I}=this.props,v=e>=f.a.theme.breakpoints.medium||Object(u.a)(),{dropdownOffset:w,query:x}=this.state,R=c?S.modalDropdown:[S.dropdown,!v&&g&&w?E(w):null,v&&S.wideModeDropdown],D={ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,onDismiss:this._handleOnEmptyStateDismiss,onItemFocusChanged:this._handleItemFocusChanged,onRef:this._handleEmptyStateRef,style:R};return h&&!x?h(D):r.createElement(p.a,{ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,filter:t,getItemDisabledMessage:s,getItemIsDisabled:o,getTopicExactMatch:i,getUserExactMatch:n,injectedItems:a,maxEvents:l,maxTopics:d,onItemClick:this._handleItemClick,onItemFocusChanged:this._handleItemFocusChanged,onRef:this._handleTypeaheadRef,query:x,renderUserDecoration:m,selectedItems:_,shouldDeferPrefetch:y,source:b,style:R,withSectionDivider:I})}),i()(this,"_dismissDropdown",()=>{this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss()}),i()(this,"_handleOnEmptyStateDismiss",()=>{this._dismissDropdown(),this._inputRef&&this._inputRef.blur()}),i()(this,"_handleLayout",()=>{this._updatePosition()}),i()(this,"_handleInputLayoutChanged",()=>{this._updatePosition()}),i()(this,"_updatePosition",()=>{if(!this._inputContainerNode)return;const{bottom:e}=this._inputContainerNode.getBoundingClientRect();e!==this.state.dropdownOffset&&this.setState({dropdownOffset:e})}),i()(this,"_handleTypeaheadRef",e=>{this._typeaheadRef=e}),i()(this,"_handleEmptyStateRef",e=>{this._emptyStateRef=e}),i()(this,"_setRootContainerNode",e=>{this._rootContainerNode=e||null}),i()(this,"_setInputRef",e=>{this._inputRef=e}),i()(this,"_setInputContainerNode",e=>{this._inputContainerNode=e||null,this._inputContainerNode&&this._updatePosition()}),i()(this,"_handleFocusChange",e=>{const t=v.a.getCount()>0;this._rootContainerNode&&this._rootContainerNode.contains(e.target)||t||this.state.showTypeaheadDropdown&&this._dismissDropdown()}),i()(this,"_handleKeyDown",e=>{const{key:t}=e,{showTypeaheadDropdown:s}=this.state;if(Object(x.e)(e)){if(t===n.a)return this._focusNext(),void e.preventDefault();if(t===n.b)return this._focusPrevious(),void e.preventDefault();if(t===n.d)return this._dismissDropdown(),void e.preventDefault();if(t!==n.f)return t===n.c&&this._hasFocusedItem()?(this._selectFocusedItem(),void e.preventDefault()):void(s||this.setState({showTypeaheadDropdown:!0}));this._dismissDropdown()}}),i()(this,"_handleItemFocusChanged",()=>{this.setState({ariaDescendantId:Object(x.b)()})}),i()(this,"_handleInputClear",()=>{this.setQuery("")}),i()(this,"_handleInputFocus",()=>{this.setState({showTypeaheadDropdown:!0}),this._updatePosition(),this.props.onFocus&&this.props.onFocus()}),i()(this,"_handleInputChange",e=>{this.setQuery(e.target.value),this._updatePosition()}),i()(this,"_handleFormSubmit",e=>{e.preventDefault(),e.stopPropagation(),this._inputRef&&this._inputRef.blur(),this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss(),this.props.onSubmit&&this.props.onSubmit()}),i()(this,"_handleItemClick",(e,t)=>{const{shouldClearOnSelect:s,shouldFocusOnClear:o,onDismiss:i,onItemClick:n}=this.props,r=s?"":this.state.query;this.setState({showTypeaheadDropdown:!1}),this._inputRef&&(s&&o?this._inputRef.focus():this._inputRef.blur()),this.setQuery(r),i&&i(),n&&n(e,t)}),i()(this,"_hasFocusedItem",()=>{const e=this._emptyStateRef||this._typeaheadRef;return e&&e.hasFocusedItem()}),i()(this,"_selectFocusedItem",()=>{const e=this._emptyStateRef||this._typeaheadRef;e&&e.selectFocusedItem()}),i()(this,"_focusNext",()=>{const e=this._emptyStateRef||this._typeaheadRef;e&&e.focusNext()}),i()(this,"_focusPrevious",()=>{const e=this._emptyStateRef||this._typeaheadRef;e&&e.focusPrevious()}),this.state={ariaDescendantId:Object(x.b)(),query:e.initialValue,showTypeaheadDropdown:!1},this._dropdownDomId="typeaheadDropdown-"+C,C+=1}UNSAFE_componentWillReceiveProps(e){this.props.initialValue!==e.initialValue&&this.setQuery(e.initialValue)}componentDidMount(){window.document.addEventListener("click",this._handleFocusChange,!0)}componentWillUnmount(){window.document.removeEventListener("click",this._handleFocusChange,!0)}render(){return r.createElement(w.a,null,this._render)}focus(){this._inputRef&&this._inputRef.focus()}setQuery(e){this.setState({query:e}),this.props.onQueryChange&&this.props.onQueryChange(e)}}i()(O,"defaultProps",{disableClearButton:!1,filter:[m.a.Users,m.a.Topics],initialValue:"",withSectionDivider:!0});const S=f.a.create(e=>({root:{flex:1,flexDirection:"column",position:"relative",zIndex:h.d+1},typeaheadContainer:{flex:1,position:"relative"},keydownInputListener:{flex:1},dropdown:{backgroundColor:e.colors.cellBackground,left:0,right:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,maxHeight:`calc(80vh - ${e.componentDimensions.appBarHeight})`},wrapper:{alignItems:"stretch",flex:1}}));t.default=O},AQOc:function(e,t,s){"use strict";s.d(t,"b",(function(){return h})),s.d(t,"a",(function(){return u}));s("IAdD"),s("kYxP");var o=s("LdEA"),i=s.n(o),n=s("lnti"),r=s("aWyx");const a={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}},c=(e=[],t={})=>e.map(e=>{if(e.proof_type===r.d.MUTUAL_FRIENDS){const{users:s}=e,o=i()(e,["users"]);return Object.assign({},o,{users:Object(n.a)(s.map(e=>t[e]))})}return e}),l=(e=[],t={})=>e.reduce((e,s)=>{const o=s.user_id,i=t[o]||{id_str:o};return e[o]=Object.assign({},s,{user:i}),e},{}),d=(e,{entries:t,entryIdsByConversationId:s})=>(s[e]||[]).map(e=>t[e]&&t[e].data).filter(Boolean),h=(e,t=a,s)=>{const{conversation_id:o,participants:n}=e,r=i()(e,["conversation_id","participants"]);return Object.assign({conversation_id:o},r,{entries:t.entryIdsByConversationId[o]||[],participants:l(n,s)})},u=(e,t,s)=>{const{conversation_id:o,participants:n,social_proof:r}=e,a=i()(e,["conversation_id","participants","social_proof"]);return Object.assign({conversation_id:o},a,{entries:d(o,t),participants:l(n,s)},r?{social_proof:c(r,s)}:{})}},LbZ7:function(e,t,s){"use strict";var o=s("97Jx"),i=s.n(o),n=s("LdEA"),r=s.n(n),a=s("KEM+"),c=s.n(a),l=s("ERkP"),d=s("rHpw"),h=s("MWbm");class u extends l.Component{render(){const e=this.props,{children:t,style:s,withGutter:o}=e,n=r()(e,["children","style","withGutter"]),a=l.Children.map(t,e=>e&&l.cloneElement(e,{style:[e.props.style,p.column,o&&p.withGutterColumn]}));return l.createElement(h.a,i()({style:[s,p.root,o&&p.withGutter]},n),a)}}c()(u,"defaultProps",{withGutter:!1});const p=d.a.create(e=>({root:{flexDirection:"row"},column:{flexBasis:0,minWidth:0},withGutter:{marginHorizontal:"-"+e.spaces.xxSmall},withGutterColumn:{marginHorizontal:e.spaces.xxSmall}}));t.a=u},OEYw:function(e,t,s){"use strict";var o=s("97Jx"),i=s.n(o),n=s("LdEA"),r=s.n(n),a=s("KEM+"),c=s.n(a),l=s("ERkP"),d=(s("kYxP"),s("rxPX")),h=s("0KEI"),u=s("hqKg"),p=s("oEoC"),m=s("o52z"),f=s("kGix"),_=s("Qyxo"),y=s("lnti"),b=(s("IAdD"),s("JtPf"),s("MvUL"),s("tVqn"),s("vy4g")),g=s("3A2y"),I=s("Ssj5"),v=s("oEOe"),w=s("GZwR");const x=[],R=Object(v.a)("rweb/typeaheadV2","FETCH"),E=({q:e,result_type:t,src:s})=>`${e}_${t}_${s}`,D={remoteResults:{},cachedIds:[]};const C=e=>e.map(e=>{let{tokens:t,rounded_score:s}=e,o=r()(e,["tokens","rounded_score"]);const{topic:i,topic_type:n}=o,a=n||w.b.Topic;return{id:`${a}_${i.replace(" ","_")}`,type:a,tokens:t,rounded_score:s,data:o}}),O=e=>e.map(e=>{let{tokens:t,rounded_score:s}=e,o=r()(e,["tokens","rounded_score"]);const i=o.topic_type||w.b.Event;return{id:`${i}_${o.topic.replace(" ","_")}`,type:i,tokens:t,rounded_score:s,data:o}}),S=(e,t)=>e.typeaheadV2.remoteResults[t],T=e=>(t,s)=>{const o=S(s(),E(e));return o&&o.timestamp&&Date.now()-o.timestamp<=3e5?Promise.resolve():t(F(e))},F=e=>(t,s,{api:o})=>{if(!e||!e.q||""===e.q.trim())return Promise.resolve();const i={queryId:E(e)};return Object(v.b)(t,{params:e,request:o.Typeahead.fetch})({actionTypes:R,context:"FETCH_TYPEAHEAD",meta:i})};I.a.register({typeaheadV2:function(e=D,t){switch(t.type){case R.REQUEST:{const{meta:{queryId:s}}=t;return Object.assign({},e,{remoteResults:Object.assign({},e.remoteResults,{[s]:Object.assign({},e.remoteResults[s],{fetchStatus:f.a.LOADING})})})}case R.SUCCESS:{const{meta:{queryId:s},payload:o}=t,i=e.cachedIds.filter(e=>e!==s),n=i.length>=25?Object(g.a)(e.remoteResults,i.splice(0,1)):e.remoteResults,r=o.users.map(e=>Object(b.a)(e,w.c.Remote));return Object.assign({},e,{cachedIds:[...i,s],remoteResults:Object.assign({},n,{[s]:{fetchStatus:f.a.LOADED,id:s,orderedSections:o.ordered_sections,events:O(o.events),topics:C(o.topics),users:Object(w.f)(r),timestamp:Date.now()}})})}case R.FAILURE:{const{meta:{queryId:s}}=t;return Object.assign({},e,{remoteResults:Object.assign({},e.remoteResults,{[s]:Object.assign({},e.remoteResults[s],{fetchStatus:f.a.FAILED})})})}default:return e}}});var P=s("UQTn");const j=[w.a.Users],k=e=>{const{filter:t,query:s,source:o}=e;return E({q:s,result_type:(t||j).join(","),src:o})},A=(e,t)=>((e,t)=>{const s=S(e,t);return s&&s.fetchStatus})(e,k(t)),N=(e,t)=>((e,t)=>{const s=S(e,t);return s&&s.users||x})(e,k(t)),L=(e,t)=>((e,t)=>{const s=S(e,t);return s&&s.topics||x})(e,k(t)),U=(e,t)=>((e,t)=>{const s=S(e,t);return s&&s.events||x})(e,k(t)),M=(e,t)=>(t.rounded_graph_weight||0)-(e.rounded_graph_weight||0),q=()=>Object(u.createSelector)(N,Object(u.createSelector)((e,t)=>t.query,(e,t)=>t.filter,P.d,P.e,(e,t,s,o)=>{if(!e||!t||t.indexOf(w.a.Users)<0)return Object(m.a)();const i=Object(P.f)(s,e);return Object(w.f)(i.map(e=>o[e]).sort(M).slice(0,10))}),A,(e,t)=>t.injectedItems,(e,t)=>t.query,(e,t)=>t.getUserExactMatch,(e,t,s,o,i,n)=>{const r=Object(_.a)(o||[],e=>e.type===w.b.User?e.data.id_str:void 0),a=t.filter(e=>r.indexOf(e.id)<0),c=e.filter(e=>r.indexOf(e.id)<0),l=Object(p.a)(a,c).slice(0,10),d=s===f.a.LOADED,h=n&&n({query:i,hasResults:!!e.length,isLoaded:d}),u=h?[...l,h]:l;return u.length?u:Object(m.a)()}),H=()=>Object(u.createSelector)(q(),Object(u.createSelector)(L,A,(e,t)=>t.query,(e,t)=>t.maxTopics,(e,t)=>t.getTopicExactMatch,(e,t,s,o,i)=>{const n=t===f.a.LOADED,r=i&&i({query:s,hasResults:!!e.length,isLoaded:n}),a=e.slice(0,o||3);return r&&a.push(r),a.length?a:Object(m.a)()}),Object(u.createSelector)(U,A,(e,t)=>t.query,(e,t)=>t.maxEvents,(e,t)=>t.filter,(e,t,s,o,i)=>{const n=s&&i&&i.indexOf(w.a.Events)>=0,r=e.slice(0,o||1);return r.length&&n?r:Object(m.a)()}),(e,t)=>t.injectedItems,(e,t,s,o)=>{const i=o&&o.length?o:null;return t.length||e.length||s.length?Object(y.a)([i,s.length?s:void 0,t.length?t:void 0,e.length?e:void 0]):i?[i]:Object(m.a)()});var W=Object(d.a)().propsFromState(()=>({fetchStatus:A,items:H()})).propsFromActions(()=>({createLocalApiErrorHandler:Object(h.d)("TYPEAHEAD_DROPDOWN_CONTAINER_CONTEXT"),fetchTypeaheadIfNeeded:T,prefetchTypeaheadUsersIfNeeded:P.b})).withAnalytics({element:"typeahead"}),B=s("kIAd"),G=s("Rp9C"),V=s("w6IS"),z=s("7nmT"),Y=s.n(z),Q=s("ZcYN"),X=s("MWbm"),K=s("I7xG"),$=s("JYMr"),Z=s("0yYu"),J=s("rHpw"),ee=s("MXDK");class te extends l.Component{constructor(e,t){super(e),c()(this,"_setFocusedItemRef",e=>{this._shouldScrollToFocusedItem&&e&&(Object(ee.c)(this._getScrollParent(),e),this._shouldScrollToFocusedItem=!1)}),c()(this,"_resetScroll",()=>{const e=this._getScrollParent();e&&(e.scrollTop=0)}),c()(this,"_handleItemClick",(e,t)=>{const{onItemClick:s}=this.props,o=this._getFlattenedItems().indexOf(e);e&&!t&&!this._shouldBlockInteractivity&&s(e,o),this._resetFocus()}),c()(this,"_getResultCount",()=>this._getFlattenedItems().length),c()(this,"_getFlattenedItems",Object(K.a)(this,e=>e.items,e=>Object(V.a)(e))),c()(this,"_setFocusIndex",(e,t)=>{const{onItemFocusChanged:s}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),s&&s(this._getFlattenedItems()[e])}),c()(this,"_resetFocus",()=>{this._setFocusIndex(this.props.withItemAlwaysSelected?0:-1)}),c()(this,"focusNext",()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e+1>=t?0:e+1;this._setFocusIndex(s,!0)}),c()(this,"focusPrevious",()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e-1<0?t-1:e-1;this._setFocusIndex(s,!0)}),c()(this,"hasFocusedItem",()=>{const{focusIndex:e}=this.state,t=this._getFlattenedItems();return e>=0&&t.length>e}),c()(this,"selectFocusedItem",()=>{const{focusIndex:e}=this.state,{getItemIsDisabled:t}=this.props;if(this.hasFocusedItem()){const s=this._getFlattenedItems()[e],o=!!t&&t(s,s.data);this._handleItemClick(s,o)}}),this.state={focusIndex:e.withItemAlwaysSelected?0:-1,showProgressBar:!1}}componentDidMount(){this._resetFocus()}componentWillUnmount(){clearTimeout(this._interactivityTimeout),clearTimeout(this._delayedProgressTimeout)}UNSAFE_componentWillReceiveProps(e){!this.props.isLoading&&e.isLoading&&(this._delayedProgressTimeout=setTimeout(()=>this.setState({showProgressBar:!0}),B.a)),this.props.isLoading&&!e.isLoading&&(clearTimeout(this._delayedProgressTimeout),this.setState({showProgressBar:!1}))}componentDidUpdate(e){e.items!==this.props.items&&(this._resetFocus(),this._resetScroll(),this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout(()=>{this._shouldBlockInteractivity=!1},500))}render(){const{domId:e,isLoading:t,items:s,selectedItems:o,style:i}=this.props,{showProgressBar:n}=this.state,r=t||s.length;let a=0;const c=!!o;return r?l.createElement(X.a,{accessibilityRole:"listbox","aria-multiselectable":c,nativeID:e,style:i},l.createElement($.a,{ariaValueText:n?"Loading results":"",indeterminate:n,style:!n&&se.hidden}),s.length?s.map((e,t)=>{const o=!Array.isArray(s[t-1])&&t>0,i=t<s.length-1,n=Array.isArray(e)?this._renderTypeaheadGroup(e,a,o,i):this._renderTypeaheadItem(e,a);return a+=Array.isArray(e)?e.length:1,n}):null):null}_renderTypeaheadGroup(e,t,s,o){const{withSectionDivider:i}=this.props;return l.createElement(l.Fragment,{key:"typeaheadGroup-"+t},i&&s?l.createElement(Z.a,{key:"typeaheadDividerTop-"+t}):null,e.map((e,s)=>this._renderTypeaheadItem(e,t+s)),i&&o?l.createElement(Z.a,{key:"typeaheadDividerBottom-"+t}):null)}_renderTypeaheadItem(e,t){const{ariaDescendantId:s,getItemDisabledMessage:o,getItemIsDisabled:i,renderUserDecoration:n,selectedItems:r}=this.props,{focusIndex:a}=this.state,c=!(!r||!e.id)&&r.indexOf(e.id)>=0,d=!!r,h=a===t,u=i&&i(e,e.data),p=o&&o(e,e.data);return l.createElement(Q.b,{disabledMessage:p,domId:h?s:void 0,isDisabled:u,isFocused:h,isInMultiSelect:d,isSelected:c,item:e,key:`typeaheadItem-${t}-${e.id||""}`,onClick:this._handleItemClick,onRef:h?this._setFocusedItemRef:void 0,renderUserDecoration:n})}_getScrollParent(){if(!this._scrollParent){const e=Object(ee.a)(Y.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}}const se=J.a.create(e=>({hidden:{visibility:"hidden"}}));var oe=s("VY6S");class ie extends l.Component{constructor(e,t){super(e,t),c()(this,"_fetchTypeaheadResultsIfNeeded",e=>{e.query&&e.fetchTypeaheadIfNeeded({q:e.query,src:e.source,result_type:e.filter.join(","),context_text:e.contextText,topic_type:e.topicType}).catch(e.createLocalApiErrorHandler({}))}),c()(this,"_setComponentRef",e=>{this._componentRef=e}),c()(this,"focusNext",()=>{this._componentRef&&this._componentRef.focusNext()}),c()(this,"focusPrevious",()=>{this._componentRef&&this._componentRef.focusPrevious()}),c()(this,"selectFocusedItem",()=>{this._componentRef&&this._componentRef.selectFocusedItem()}),c()(this,"hasFocusedItem",()=>!!this._componentRef&&this._componentRef.hasFocusedItem()),c()(this,"_handleItemClick",(e,t)=>{const{analytics:s,onItemClick:o,query:i}=this.props;o(e,t),s.scribe({action:"click",data:{search_details:{query:i},targets:[G.a.forTypeaheadResult(e,t)]}})}),c()(this,"_scribeResults",()=>{const{analytics:e,items:t,query:s}=this.props,o=Object(y.a)(Object(V.a)(t).map((e,t)=>G.a.forTypeaheadResult(e,t)));e.scribe({action:"impression",data:{items:o,search_details:{query:s}}})}),this._debouncedFetchTypeaheadResultsIfNeeded=Object(oe.a)(this._fetchTypeaheadResultsIfNeeded,250),this.state={shouldShowPrefetchResults:!0}}componentDidMount(){const{createLocalApiErrorHandler:e,onRef:t,prefetchTypeaheadUsersIfNeeded:s}=this.props;t&&t(this),this._debouncedFetchTypeaheadResultsIfNeeded(this.props),s().catch(e({}))}componentWillUnmount(){this.props.onRef&&this.props.onRef(void 0),clearTimeout(this._prefetchResultsTimer)}UNSAFE_componentWillReceiveProps(e){const{onRef:t,query:s,filter:o,source:i}=this.props,{query:n,filter:r,source:a}=e;t&&t!==e.onRef&&t(void 0),n===s&&r===o&&a===i||(this._debouncedFetchTypeaheadResultsIfNeeded(e),e.shouldDeferPrefetch&&(clearTimeout(this._prefetchResultsTimer),this.setState({shouldShowPrefetchResults:!1}),this._prefetchResultsTimer=setTimeout(()=>{this.props.query&&this.props.fetchStatus!==f.a.LOADED&&this.setState({shouldShowPrefetchResults:!0})},B.a)))}componentDidUpdate(e){const{onRef:t,items:s}=this.props;t&&t!==e.onRef&&t(this),(null==s?void 0:s.length)&&s!==e.items&&this._scribeResults()}render(){const e=this.props,{injectedItems:t,items:s,query:o,fetchStatus:n}=e,a=r()(e,["analytics","contextText","filter","getTopicExactMatch","getUserExactMatch","injectedItems","items","onRef","onItemClick","query","shouldDeferPrefetch","source","topicType","fetchStatus","createLocalApiErrorHandler","fetchTypeaheadIfNeeded","maxEvents","maxTopics","prefetchTypeaheadUsersIfNeeded"]),c=o&&n!==f.a.LOADED,d=c&&!this.state.shouldShowPrefetchResults?t:s;return l.createElement(te,i()({},a,{isLoading:!!c,items:d,onItemClick:this._handleItemClick,ref:this._setComponentRef}))}}c()(ie,"defaultProps",{filter:[w.a.Users],injectedItems:[],maxEvents:3,maxTopics:1});const ne=W(ie);t.a=ne},OhSZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));s("kYxP");var o=s("ERkP"),i=s("aWyx"),n=s("XnpN"),r=s("jV+4"),a=s("t62R"),c=s("p9G8");const l=(e=[])=>e.map(({data:e})=>e),d=({conversation:e,newConversationParticipants:t,perspective:s})=>{if(e){if(e.type===i.a.ONE_TO_ONE){const[t]=Object(n.a)(e,s).map(({user:e})=>e);return t.name}return Object(c.a)(e,s)}{const e=l(t);return Object(c.b)(e,s)}};t.b=({conversation:e,newConversationParticipants:t,perspective:s,titleWeight:d="bold",textColor:h="normal",withScreenName:u=!0})=>{if(e){if(e.type===i.a.ONE_TO_ONE){const[t]=Object(n.a)(e,s).map(({user:e})=>e);return o.createElement(r.a,{color:h,isProtected:t.protected,isVerified:t.verified,name:t.name,screenName:t.screen_name,weight:d,withLink:!1,withScreenName:u})}return o.createElement(a.c,{color:h,numberOfLines:1,weight:d},Object(c.a)(e,s))}{const e=l(t);return o.createElement(a.c,{color:h,numberOfLines:1,weight:d},Object(c.b)(e,s))}}},XnpN:function(e,t,s){"use strict";s("kYxP");var o=s("aWyx"),i=s("t0aI");const n=(e=0)=>new Date(Number(e)),r=(e,t)=>n(e.join_time)-n(t.join_time),a=({user:e},{user:t})=>Object(i.a)(e.id_str,t.id_str);var c=s("tn7R"),l=s("VIKJ");t.a=(e,t)=>{const{participants:s,type:i,created_by_user_id:n}=e,d=Object(c.a)(s),[h,u]=Object(l.a)(d,({user:e})=>e.id_str===t);return u.length?i===o.a.GROUP&&1===u.length?[...h,...u]:n?u.sort(((...e)=>(t,s)=>e.map(e=>e(t,s)).filter(e=>!!e)[0]||0)((e=>({user:t},{user:s})=>{switch(e){case t.id_str:return-1;case s.id_str:return 1;default:return 0}})(n),r,a)):u:h}},ZcYN:function(e,t,s){"use strict";s.d(t,"a",(function(){return Q}));s("kYxP");var o=s("KEM+"),i=s.n(o),n=s("ERkP"),r=s("v6aA"),a=s("ZNx0"),c=s("IMYl"),l=s("rxPX"),d=s("AQOc"),h=s("V5Qi"),u=s("G6rE");const p=(e,t)=>t.conversationId,m=(e,t)=>Object(h.a)(e,p(0,t));var f=Object(l.a)().propsFromState(()=>({conversationId:p,conversation:m,users:u.e.selectAll})).adjustStateProps(({conversationId:e,conversation:t,users:s})=>({conversation:t&&Object(d.b)(t.data,void 0,s)})),_=s("aA19"),y=s("OhSZ"),b=s("5mJL"),g=s("rHpw");const I=g.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.xLarge,minWidth:"32px"},bodyColumn:{flexGrow:7,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},disabled:{opacity:.6,backgroundColor:e.colors.gray0}}));var v=f(({conversation:e,perspective:t,isDisabled:s,isSelected:o})=>e?n.createElement(b.a,{avatarCell:n.createElement(_.a,{conversation:e,perspective:t,size:"xLarge"}),avatarCellStyle:I.avatarColumn,avatarSize:"xLarge",cellStyle:I.bodyColumn,style:[I.root,!o&&s&&I.disabled]},n.createElement(y.b,{conversation:e,perspective:t}),Q({isSelected:o})):null),w=s("MWbm"),x=s("LbZ7"),R=s("t62R"),E=s("9Xij"),D=s("TIdA"),C=s("A91F");class O extends n.PureComponent{render(){const{image:e,event:t,supportText:s}=this.props;return n.createElement(w.a,{style:S.root},n.createElement(x.a,{withGutter:!0},n.createElement(w.a,{style:S.bodyColumn},s?n.createElement(R.c,{color:"gray600",size:"small"},s):null,n.createElement(R.c,{numberOfLines:1},t)),e?n.createElement(w.a,{style:S.coverContainer},n.createElement(E.a,{ratio:1},n.createElement(D.a,{accessibilityLabel:"",aspectMode:C.a.SQUARE,image:e}))):null))}}const S=g.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},bodyColumn:{flexGrow:7,justifyContent:"center"},coverContainer:{backgroundColor:e.colors.gray200,borderRadius:e.borderRadii.small,flexGrow:1,justifyContent:"flex-end",maxHeight:"100px",maxWidth:"100px",overflow:"hidden",width:"25%"}}));var T=O,F=s("GZwR"),P=s("EHV7");class j extends n.PureComponent{render(){const{isDisabled:e,resultContext:t,topic:s}=this.props;return n.createElement(w.a,{style:[k.root,e&&k.disabled]},n.createElement(R.c,{weight:"bold",withHashflags:!0},s),t?n.createElement(w.a,{style:k.context},this._renderIcon(),n.createElement(R.c,{color:"gray600"},t.display_string)):null)}_renderIcon(){const{resultContext:e}=this.props;return e&&e.types[0]&&"followable_topic"===e.types[0].type?n.createElement(P.a,{style:k.icon}):null}}const k=g.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},context:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:e.fontSizes.small,paddingRight:e.spaces.xxSmall,width:e.fontSizes.small},disabled:{backgroundColor:e.colors.gray0}}));var A=j,N=s("3XMw"),L=s.n(N),U=s("tocL"),M="TypeaheadUser",q=s("IMA+");const H=L.a.ae2205d1,W=L.a.d960b55b;class B extends n.PureComponent{render(){const{avatarUri:e,disabledMessage:t,isDisabled:s,isProtected:o,isVerified:i,name:r,screenName:a,decoration:c,userId:l}=this.props,d=this._getSocialContext(),h=this._getResultContext(),u=d||h;return n.createElement(q.a,{avatarSize:"xLarge",avatarUri:e,decoration:c,disabledMessage:s?t:void 0,displayMode:"UserCompact",isProtected:o,isVerified:i,name:r,screenName:a,socialContext:u,testID:M,userId:l,withLink:!1})}_getSocialContext(){const{socialContext:e}=this.props;if(!e||!e.following)return;const t=e.followed_by?H:W;return{contextType:U.a.Follow,text:t}}_getResultContext(){const{resultContext:e}=this.props;if(!e||!e.display_string||!e.types)return;return{contextType:"num_tweets"===e.types[0].type?U.a.NewTweets:U.a.Follow,text:e.display_string}}}var G=B,V=s("htQn");class z extends n.Component{constructor(...e){super(...e),i()(this,"_onViewRef",e=>{this._viewRef=e;const{onRef:t}=this.props;t&&t(e)}),i()(this,"_handleClick",()=>{const{item:e}=this.props;this.props.onClick&&this.props.onClick(e,this.isDisabled)})}componentDidMount(){this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame(()=>{this._viewRef&&this._viewRef.setNativeProps({style:{opacity:1}})}))}componentDidUpdate(e){const{onRef:t}=this.props;t&&t!==e.onRef&&this._viewRef&&t(this._viewRef)}componentWillUnmount(){this._rafId&&window.cancelAnimationFrame(this._rafId)}render(){const{domId:e,isDisabled:t,isFocused:s,isInMultiSelect:o,isSelected:i,style:r}=this.props;return n.createElement(a.a,{viewType:"typeahead_result"},n.createElement(w.a,{accessibilityRole:"option",accessibilityState:{checked:!(!o||!i)||void 0,selected:t?void 0:o&&i||!o&&!!s},nativeID:e},n.createElement(V.a,{accessibilityRole:o?"checkbox":"button",accessible:!0,disabled:t,onPress:this._handleClick,style:[Y.root,s&&Y.focused,Y.transitionStyles,this._loaded&&Y.loaded,r],viewRef:this._onViewRef},this._renderResult())))}_renderResult(){const{item:e,disabledMessage:t,isDisabled:s,isSelected:o,renderUserDecoration:i}=this.props;switch(e.type){case F.b.User:{const{data:r}=e,a=i?i({userId:r.id_str,isSelected:o}):void 0;return n.createElement(G,{avatarUri:r.profile_image_url_https,canDm:!!r.can_dm,canMediaTag:!!r.can_media_tag,decoration:a||void 0,disabledMessage:t,isDisabled:s,isProtected:!!r.protected,isVerified:!!r.verified,name:r.name,resultContext:r.result_context,screenName:r.screen_name,socialContext:r.social_context,userId:r.id_str})}case F.b.Event:{const{data:t}=e;return n.createElement(T,{event:t.topic,image:t.primary_image&&t.primary_image.original_info,supportText:t.supporting_text})}case F.b.Hashtag:case F.b.Topic:{const{data:t}=e;return n.createElement(A,{isDisabled:s,resultContext:t.result_context,topic:t.topic})}case F.b.DMConversation:return!!this.context.loggedInUserId&&n.createElement(v,{conversationId:e.id,isDisabled:s,isSelected:o,perspective:this.context.loggedInUserId});case F.b.NoResult:{const{data:t}=e,{text:s}=t;return n.createElement(R.c,{style:Y.noResult},s)}default:return null}}get isDisabled(){return!!this.props.isDisabled}}i()(z,"contextType",r.a);const Y=g.a.create(e=>({root:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},checkIcon:{color:e.colors.primary},noResult:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},loaded:{opacity:1},focused:{backgroundColor:e.colors.gray0},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}})),Q=({isSelected:e})=>e?n.createElement(c.a,{importantForAccessibility:"no-hide-descendants",style:Y.checkIcon}):null;t.b=z},aA19:function(e,t,s){"use strict";var o=s("ERkP"),i=s("aWyx"),n=s("XnpN"),r=s("rHpw"),a=s("9Xij"),c=s("cm6r"),l=s("TIdA"),d=s("A91F"),h=s("oSwX"),u=s("U+bB"),p=s("MWbm");const m=r.a.create(e=>({root:{borderRadius:e.borderRadii.infinite,overflow:"hidden"},container:{height:"auto",overflow:"hidden",width:"100%"},image:{borderRadius:e.borderRadii.none}})),f=r.a.create(e=>({container:{flexDirection:"row"},left:{flex:1},right:{flex:1,marginLeft:e.borderWidths.small,marginRight:`calc(-1 * ${e.borderWidths.small})`}})),_=r.a.create(e=>({container:{flexDirection:"column"},top:{flex:1,marginBottom:e.borderWidths.small},bottom:{flex:1}})),y=({left:e,right:t})=>o.createElement(p.a,{style:f.container},o.createElement(p.a,{style:f.left},e),o.createElement(p.a,{style:f.right},t)),b=({top:e,bottom:t})=>o.createElement(p.a,{style:_.container},o.createElement(p.a,{style:_.top},e),o.createElement(p.a,{style:_.bottom},t));class g extends o.Component{render(){const{link:e,conversation:t,perspective:s}=this.props,i=t&&t.avatar_image_https,r=t?Object(n.a)(t,s).map(({user:e})=>e):[],l=r.slice(0,3),d=this._avatarFromGroup(t)||this._avatarFromSrc(i)||this._avatarFromParticipants(l),h=e||this._defaultLink(t,r);return d?o.createElement(a.a,{ratio:1,style:m.root},h?o.createElement(c.a,{interactiveStyles:null,link:h},d):d):null}_defaultLink(e,t){if(e)return e.type===i.a.GROUP?`/messages/${e.conversation_id}/participants`:e.type===i.a.ONE_TO_ONE?"/"+t[0].screen_name:void 0}_avatarFromGroup(e){const t=e&&e.avatar&&e.avatar.image&&e.avatar.image.original_info;return t?o.createElement(l.a,{accessibilityLabel:"",aspectMode:d.a.SQUARE,backgroundColor:r.a.theme.colors.gray50,image:t,rounded:!0}):null}_avatarFromSrc(e){return e?o.createElement(u.a,{source:e}):null}_avatarFromParticipants(e){const t=e.length;return 0===t?null:1===t?this._singleParticipantAvatar(e[0]):this._multipleParticipantAvatar(e)}_singleParticipantAvatar(e){const{size:t}=this.props;return o.createElement(p.a,{key:e.id_str,style:m.container},o.createElement(h.default,{importantForAccessibility:"no-hide-descendants",size:t||"xxLarge",style:m.image,uri:e.profile_image_url_https}))}_multipleParticipantAvatar(e){const t=e.length,s=e.map((e,s)=>{const i=2===t||3===t&&0===s?.5:1;return o.createElement(p.a,{key:e.id_str,style:m.container},o.createElement(h.default,{aspectRatio:i,circle:!1,importantForAccessibility:"no-hide-descendants",size:"custom",style:m.image,uri:e.profile_image_url_https}))});if(2===t)return o.createElement(y,{left:s[1],right:s[0]});{const e=o.createElement(b,{bottom:s[2],top:s[1]}),t=s[0];return o.createElement(y,{left:e,right:t})}}}t.a=g},o52z:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var o=s("VPAj");const i=Object(o.a)([]);Object(o.a)({})},p9G8:function(e,t,s){"use strict";s.d(t,"b",(function(){return d}));s("kYxP");var o=s("Xrkv"),i=s("aWyx"),n=s("XnpN"),r=s("3XMw"),a=s.n(r);const c=a.a.g755fcde,l=a.a.f6b1ff81;t.a=(e,t)=>{const{type:s,name:o,participants:r={}}=e;if(s===i.a.GROUP&&o)return o;if(!Object.keys(r).length)return;const a=Object(n.a)(e,t).map(({user:e})=>e);return d(a,t,s)};const d=(e=[],t,s=i.a.GROUP)=>{const n=e.filter(e=>e.id_str!==t).map(e=>e.name);switch(n.length){case 0:return c;case 1:{const[e]=n;return s===i.a.GROUP?l({name:e}):e}default:{const e=!0;return Object(o.a)(n,e)}}}}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~bundle.UserLists.6e872505.js.map